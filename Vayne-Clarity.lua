--[[Clarity Vayne 1.1]]

--Changelog ver 1.1 Added E to proc silver bolt passive when u press C (aa<Q<aa<E) for harass

assert(load(Base64Decode(
"DQoJDQoNCi0tW1tWYXluZSBieSBUZWFtIENsYXJpdHldXQ0KDQoNCg0KaWYgbXlIZXJvLmNoYXJOYW1lIH49ICdWYXluZScgdGhlbiByZXR1cm4gZW5kDQphc3NlcnQobG9hZChCYXNlNjREZWNvZGUoIkcweDFZVklBQVFRRUJBZ0FHWk1OQ2hvS0FBQUFBQUFBQUFBQUFRSUtBQUFBQmdCQUFFRkFBQUFkUUFBQkJrQkFBR1VBQUFBS1FBQ0JCa0JBQUdWQUFBQUtRSUNCSHdDQUFBUUFBQUFFQmdBQUFHTnNZWE56QUFRTkFBQUFVMk55YVhCMFUzUmhkSFZ6QUFRSEFBQUFYMTlwYm1sMEFBUUxBQUFBVTJWdVpGVndaR0YwWlFBQ0FBQUFBZ0FBQUFnQUFBQUNBQW90QUFBQWhrQkFBTWFBUUFBR3dVQUFCd0ZCQWtGQkFRQWRnUUFCUnNGQUFFY0J3UUtCZ1FFQVhZRUFBWWJCUUFDSEFVRUR3Y0VCQUoyQkFBSEd3VUFBeHdIQkF3RUNBZ0RkZ1FBQkJzSkFBQWNDUVFSQlFnSUFIWUlBQVJZQkFnTGRBQUFCbllBQUFBcUFBSUFLUUFDRmhnQkRBTUhBQWdDZGdBQUJDb0NBaFFxQXc0YUdBRVFBeDhCQ0FNZkF3d0hkQUlBQW5ZQUFBQXFBZ0llTVFFUUFBWUVFQUoxQWdBR0d3RVFBNVFBQUFKMUFBQUVmQUlBQUZBQUFBQVFGQUFBQWFIZHBaQUFFRFFBQUFFSmhjMlUyTkVWdVkyOWtaUUFFQ1FBQUFIUnZjM1J5YVc1bkFBUURBQUFBYjNNQUJBY0FBQUJuWlhSbGJuWUFCQlVBQUFCUVVrOURSVk5UVDFKZlNVUkZUbFJKUmtsRlVnQUVDUUFBQUZWVFJWSk9RVTFGQUFRTkFBQUFRMDlOVUZWVVJWSk9RVTFGQUFRUUFBQUFVRkpQUTBWVFUwOVNYMHhGVmtWTUFBUVRBQUFBVUZKUFEwVlRVMDlTWDFKRlZrbFRTVTlPQUFRRUFBQUFTMlY1QUFRSEFBQUFjMjlqYTJWMEFBUUlBQUFBY21WeGRXbHlaUUFFQ2dBQUFHZGhiV1ZUZEdGMFpRQUFCQVFBQUFCMFkzQUFCQWNBQUFCaGMzTmxjblFBQkFzQUFBQlRaVzVrVlhCa1lYUmxBQU1BQUFBQUFBRHdQd1FVQUFBQVFXUmtRblZuYzNCc1lYUkRZV3hzWW1GamF3QUJBQUFBQ0FBQUFBZ0FBQUFBQUFNRkFBQUFCUUFBQUF3QVFBQ0JRQUFBSFVDQUFSOEFnQUFDQUFBQUJBc0FBQUJUWlc1a1ZYQmtZWFJsQUFNQUFBQUFBQUFBUUFBQUFBQUJBQUFBQVFBUUFBQUFRRzlpWm5WelkyRjBaV1F1YkhWaEFBVUFBQUFJQUFBQUNBQUFBQWdBQUFBSUFBQUFDQUFBQUFBQUFBQUJBQUFBQlFBQUFITmxiR1lBQVFBQUFBQUFFQUFBQUVCdlltWjFjMk5oZEdWa0xteDFZUUF0QUFBQUF3QUFBQU1BQUFBRUFBQUFCQUFBQUFRQUFBQUVBQUFBQkFBQUFBUUFBQUFFQUFBQUJBQUFBQVVBQUFBRkFBQUFCUUFBQUFVQUFBQUZBQUFBQlFBQUFBVUFBQUFGQUFBQUJnQUFBQVlBQUFBR0FBQUFCZ0FBQUFVQUFBQURBQUFBQXdBQUFBWUFBQUFHQUFBQUJnQUFBQVlBQUFBR0FBQUFCZ0FBQUFZQUFBQUhBQUFBQndBQUFBY0FBQUFIQUFBQUJ3QUFBQWNBQUFBSEFBQUFCd0FBQUFjQUFBQUlBQUFBQ0FBQUFBZ0FBQUFJQUFBQUFnQUFBQVVBQUFCelpXeG1BQUFBQUFBdEFBQUFBZ0FBQUdFQUFBQUFBQzBBQUFBQkFBQUFCUUFBQUY5RlRsWUFDUUFBQUE0QUFBQUNBQTBYQUFBQWh3QkFBSXhBUUFFQmdRQUFRY0VBQUoxQUFBS0hBRUFBakFCQkFRRkJBUUJIZ1VFQWdjRUJBTWNCUWdBQndnRUFRQUtBQUlIQ0FRREdRa0lBeDRMQ0JRSERBZ0FXQVFNQ25VQ0FBWWNBUUFDTUFFTUJuVUFBQVI4QWdBQU5BQUFBQkFRQUFBQjBZM0FBQkFnQUFBQmpiMjV1WldOMEFBUVJBQUFBYzJOeWFYQjBjM1JoZEhWekxtNWxkQUFEQUFBQUFBQUFWRUFFQlFBQUFITmxibVFBQkFzQUFBQkhSVlFnTDNONWJtTXRBQVFFQUFBQVMyVjVBQVFDQUFBQUxRQUVCUUFBQUdoM2FXUUFCQWNBQUFCdGVVaGxjbThBQkFrQUFBQmphR0Z5VG1GdFpRQUVKZ0FBQUNCSVZGUlFMekV1TUEwS1NHOXpkRG9nYzJOeWFYQjBjM1JoZEhWekxtNWxkQTBLRFFvQUJBWUFBQUJqYkc5elpRQUFBQUFBQVFBQUFBQUFFQUFBQUVCdlltWjFjMk5oZEdWa0xteDFZUUFYQUFBQUNnQUFBQW9BQUFBS0FBQUFDZ0FBQUFvQUFBQUxBQUFBQ3dBQUFBc0FBQUFMQUFBQURBQUFBQXdBQUFBTkFBQUFEUUFBQUEwQUFBQU9BQUFBRGdBQUFBNEFBQUFPQUFBQUN3QUFBQTRBQUFBT0FBQUFEZ0FBQUE0QUFBQUNBQUFBQlFBQUFITmxiR1lBQUFBQUFCY0FBQUFDQUFBQVlRQUFBQUFBRndBQUFBRUFBQUFGQUFBQVgwVk9WZ0FCQUFBQUFRQVFBQUFBUUc5aVpuVnpZMkYwWldRdWJIVmhBQW9BQUFBQkFBQUFBUUFBQUFFQUFBQUNBQUFBQ0FBQUFBSUFBQUFKQUFBQURnQUFBQWtBQUFBT0FBQUFBQUFBQUFFQUFBQUZBQUFBWDBWT1ZnQT0iKSwgbmlsLCAiYnQiLCBfRU5WKSkoKSBTY3JpcHRTdGF0dXMoIldKTUxLUUtSUFBQIikgDQoNCmlmIG5vdCBWSVBfVVNFUiB0aGVuIHJldHVybiBlbmQNCg0KDQoNCnJlcXVpcmUgIlN4T3JiV2FsayINCg0KIA0KDQpsb2NhbCBBQSA9IEFhDQpsb2NhbCBRID0ge3JhbmdlID0gMzAwLCBJc1JlYWR5ID0gZnVuY3Rpb24oKSByZXR1cm4gbXlIZXJvOkNhblVzZVNwZWxsKF9RKSA9PSBSRUFEWSBlbmR9DQpsb2NhbCBFID0ge3JhbmdlID0gNTUwLCBkZWxheSA9IDAuMjUsIHNwZWVkID0gMjIwMCwgd2lkdGggPSBuaWwsSXNSZWFkeSA9IGZ1bmN0aW9uKCkgcmV0dXJuIG15SGVybzpDYW5Vc2VTcGVsbChfRSkgPT0gUkVBRFkgZW5kfQ0KbG9jYWwgUiA9IHtyYW5nZSA9IDExMDAsIElzUmVhZHkgPSBmdW5jdGlvbigpIHJldHVybiBteUhlcm86Q2FuVXNlU3BlbGwoX1IpID09IFJFQURZIGVuZH0NCmxvY2FsIGlnbml0ZSA9IG5pbA0KbG9jYWwgaURtZyA9IDANCmxvY2FsIGluZm9ybWF0aW9uVGFibGUgPSB7fQ0KbG9jYWwgc3BlbGxFeHBpcmVkID0gdHJ1ZQ0KbG9jYWwgdGFyZ2V0ID0gbmlsDQpsb2NhbCB0cw0KbG9jYWwgdHMgPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfUFJJT1JJVFksIDIxNTAsIERBTUFHRV9NQUdJQywgdHJ1ZSkNCmxvY2FsIG15VGFyZ2V0ID0gbmlsDQpsb2NhbCBLaWxsYWJsZSA9IGZhbHNlDQpsb2NhbCBMYXN0QWxlcnQgPSAwDQpsb2NhbCBUcmFja1NwZWxscyA9IHtfUSwgX1csIF9FLCBfUiwgU1VNTU9ORVJfMSwgU1VNTU9ORVJfMn0NCmxvY2FsIFNwZWxsc0RhdGEgPSB7fQ0KbG9jYWwgVGlja0xpbWl0ID0gMA0KbG9jYWwgRmlyc3RUaWNrID0gZmFsc2UNCmxvY2FsIGVuZW15VGFibGUgPSBHZXRFbmVteUhlcm9lcygpDQpsb2NhbCB0cCA9IFRhcmdldFByZWRpY3Rpb25WSVAoMTAwMCwgMjIwMCwgMC4yNSkNCmxvY2FsIEFsbENsYXNzTWVudSA9IDE2DQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQpsb2NhbCBTU3BlbGxzID0gewkJe0NOYW1lPSJGbGFzaCIsIE5hbWU9InN1bW1vbmVyZmxhc2giLCBDb2xvcj17MjU1LCAyNTUsIDI1NSwgMH0gfSwNCgkJCQkJCXtDTmFtZT0iR2hvc3QiLCBOYW1lPSJzdW1tb25lcmhhc3RlIiwgQ29sb3I9ezI1NSwgMCwgMCwgMjU1fSB9LA0KCQkJCQkJe0NOYW1lPSJJZ25pdGUiLCBOYW1lPSJzdW1tb25lcmRvdCIsIENvbG9yPXsyNTUsIDI1NSwgMCwgMCB9fSwNCgkJCQkJCXtDTmFtZT0iQmFycmllciIsIE5hbWU9InN1bW1vbmVyYmFycmllciIsIENvbG9yPXsyNTUsIDIwOSwgMTQzLCAwfX0sDQoJCQkJCQl7Q05hbWU9IlNtaXRlIiwgTmFtZT0ic3VtbW9uZXJzbWl0ZSIsIENvbG9yPXsyNTUsIDIwOSwgMTQzLCAwfX0sDQoJCQkJCQl7Q05hbWU9IkV4aGF1c3QiLCBOYW1lPSJzdW1tb25lcmV4aGF1c3QiLCBDb2xvcj17MjU1LCAyMDksIDE0MywgMH19LA0KCQkJCQkJe0NOYW1lPSJIZWFsIiwgTmFtZT0ic3VtbW9uZXJoZWFsIiwgQ29sb3I9ezI1NSwgMCwgMjU1LCAwfX0sDQoJCQkJCQl7Q05hbWU9IlRlbGVwb3J0IiwgTmFtZT0ic3VtbW9uZXJ0ZWxlcG9ydCIsIENvbG9yPXsyNTUsIDE5MiwgMCwgMjA5fX0sDQoJCQkJCQl7Q05hbWU9IkNsZWFuc2UiLCBOYW1lPSJzdW1tb25lcmJvb3N0IiwgQ29sb3I9ezI1NSwgMjU1LCAxMzgsIDE4MX19LA0KCQkJCQkJe0NOYW1lPSJDbGFyaXR5IiwgTmFtZT0ic3VtbW9uZXJtYW5hIiwgQ29sb3I9ezI1NSwgMCwgMTEwLCAyNTV9fSwNCgkJCQkJCXtDTmFtZT0iQ2xhaXJ2b3lhbmNlIiwgTmFtZT0ic3VtbW9uZXJjbGFpcnZveWFuY2UiLCBDb2xvcj17MjU1LCAwLCAxMTAsIDI1NX19LA0KCQkJCQkJe0NOYW1lPSJSZXZpdmUiLCBOYW1lPSJzdW1tb25lcnJldml2ZSIsIENvbG9yPXsyNTUsIDAsIDI1NSwgMH19LA0KCQkJCQkJe0NOYW1lPSJHYXJyaXNvbiIsIE5hbWU9InN1bW1vbmVyb2RpbmdhcnJpc29uIiwgQ29sb3I9ezI1NSwgMCwgMTEwLCAyNTV9fSwNCgkJCQkJCXtDTmFtZT0iVGhlIFJlc3QiLCBOYW1lPSJUaGVSZXN0IiwgQ29sb3I9ezI1NSwgMjU1LCAyNTUsIDI1NX19LA0KCQkJCQkJfQ0KDQpsb2NhbCBUb0ludGVycnVwdCA9IHt9DQpsb2NhbCBJbnRlcnJ1cHRMaXN0ID0gew0KICAgIHsgY2hhck5hbWUgPSAiQ2FpdGx5biIsIHNwZWxsTmFtZSA9ICJDYWl0bHluQWNlaW50aGVIb2xlIn0sDQogICAgeyBjaGFyTmFtZSA9ICJGaWRkbGVTdGlja3MiLCBzcGVsbE5hbWUgPSAiQ3Jvd3N0b3JtIn0sDQogICAgeyBjaGFyTmFtZSA9ICJGaWRkbGVTdGlja3MiLCBzcGVsbE5hbWUgPSAiRHJhaW5DaGFubmVsIn0sDQogICAgeyBjaGFyTmFtZSA9ICJHYWxpbyIsIHNwZWxsTmFtZSA9ICJHYWxpb0lkb2xPZkR1cmFuZCJ9LA0KICAgIHsgY2hhck5hbWUgPSAiS2FydGh1cyIsIHNwZWxsTmFtZSA9ICJGYWxsZW5PbmUifSwNCiAgICB7IGNoYXJOYW1lID0gIkthdGFyaW5hIiwgc3BlbGxOYW1lID0gIkthdGFyaW5hUiJ9LA0KICAgIHsgY2hhck5hbWUgPSAiTHVjaWFuIiwgc3BlbGxOYW1lID0gIkx1Y2lhblIifSwNCiAgICB7IGNoYXJOYW1lID0gIk1hbHphaGFyIiwgc3BlbGxOYW1lID0gIkFsWmFoYXJOZXRoZXJHcmFzcCJ9LA0KICAgIHsgY2hhck5hbWUgPSAiTWlzc0ZvcnR1bmUiLCBzcGVsbE5hbWUgPSAiTWlzc0ZvcnR1bmVCdWxsZXRUaW1lIn0sDQogICAgeyBjaGFyTmFtZSA9ICJOdW51Iiwgc3BlbGxOYW1lID0gIkFic29sdXRlWmVybyJ9LCAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICB7IGNoYXJOYW1lID0gIlBhbnRoZW9uIiwgc3BlbGxOYW1lID0gIlBhbnRoZW9uX0dyYW5kU2t5ZmFsbF9KdW1wIn0sDQogICAgeyBjaGFyTmFtZSA9ICJTaGVuIiwgc3BlbGxOYW1lID0gIlNoZW5TdGFuZFVuaXRlZCJ9LA0KICAgIHsgY2hhck5hbWUgPSAiVXJnb3QiLCBzcGVsbE5hbWUgPSAiVXJnb3RTd2FwMiJ9LA0KICAgIHsgY2hhck5hbWUgPSAiVmFydXMiLCBzcGVsbE5hbWUgPSAiVmFydXNRIn0sDQoJeyBjaGFyTmFtZSA9ICJXYXJ3aWNrIiwgc3BlbGxOYW1lID0gIkluZmluaXRlRHVyZXNzIn0sDQoJeyBjaGFyTmFtZSA9ICJWZWxrb3oiLCBzcGVsbE5hbWUgPSAiVmVsa296UiJ9DQp9DQoNCmxvY2FsIEVuZW15VGFibGUgPSB7fQ0KbG9jYWwgVGltZU1pc3NpbmcgPSB7fQ0KbG9jYWwgU3VycHJpemVUaW1lID0ge30NCmxvY2FsIERpc3RhbmNlVG9FbmVteSA9IHt9DQpsb2NhbCBFbmVteVZpc2libGUgPSB7fQ0KbG9jYWwgRHJhd2VkID0ge30NCmxvY2FsIExhc3REcmF3ID0ge30NCmxvY2FsIEVuZW15RGVhZCA9IHt9DQpsb2NhbCBBcHBlYXJlZCA9IHt9DQpsb2NhbCBEaXNzYXBlYXJlZCA9IHt9DQoNCmxvY2FsIGJsYWNrQ29sb3IgID0gNDI3ODE5MDA4MA0KbG9jYWwgcHVycGxlQ29sb3IgPSA0Mjk0OTAyMDE1DQpsb2NhbCBncmVlbkNvbG9yICA9IDQyNzgyNTUzNjANCmxvY2FsIGFxdWFDb2xvciA9IEFSR0IoMjU1LDEwMiwgMjA1LCAxNzApDQoNCmxvY2FsIHdoaXRlQ29sb3IgPSBBUkdCKDI1NSwyNTUsIDI1NSwgMjU1KQ0KbG9jYWwgZ3JheUNvbG9yID0gQVJHQigyNTUsIDIwMCwgMjAwLCAyMDApDQoNCg0KDQoNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoNCg0KZnVuY3Rpb24gR2V0Q3VzdG9tVGFyZ2V0KCkNCgl0czp1cGRhdGUoKQ0KCWlmIF9HLkF1dG9DYXJyeSBhbmQgVmFsaWRUYXJnZXQoX0cuQXV0b0NhcnJ5LkNyb3NzaGFpcjpHZXRUYXJnZXQoKSkgdGhlbiByZXR1cm4gX0cuQXV0b0NhcnJ5LkNyb3NzaGFpcjpHZXRUYXJnZXQoKSBlbmQNCglpZiBub3QgX0cuUmVib3JuX0xvYWRlZCB0aGVuIHJldHVybiB0cy50YXJnZXQgZW5kDQoJaWYgVmFsaWRUYXJnZXQoU2VsZWN0ZWRUYXJnZXQpIHRoZW4gcmV0dXJuIFNlbGVjdGVkVGFyZ2V0IGVuZA0KCXJldHVybiB0cy50YXJnZXQNCmVuZA0KDQpmdW5jdGlvbiBPbkxvYWQoKQ0KICAgDQoJY2hlY2tGb3VudGFpbiA9IChHZXRHYW1lKCkubWFwLmluZGV4IH49IDcgYW5kIEdldEdhbWUoKS5tYXAuaW5kZXggfj0gMTIpIC0tIG5vIGhlYWwgaW4gUHJvdmluZyBHcm91bmQgLyBBUkFNICANCglQcmludENoYXQoIjxmb250IGNvbG9yPVwiIzAwRkYwMFwiPlZheW5lIGJ5IFRlYW0gQ2xhcml0eS48L2ZvbnQ+IikNCglJdGVtTmFtZXMJCQkJPSB7DQoJCVszMzAzXQkJCQk9ICJBcmNoQW5nZWxzRHVtbXlTcGVsbCIsDQoJCVszMDA3XQkJCQk9ICJBcmNoQW5nZWxzRHVtbXlTcGVsbCIsDQoJCVszMTQ0XQkJCQk9ICJCaWxnZXdhdGVyQ3V0bGFzcyIsDQoJCVszMTg4XQkJCQk9ICJJdGVtQmxhY2tmaXJlVG9yY2giLA0KCQlbMzE1M10JCQkJPSAiSXRlbVN3b3JkT2ZGZWFzdEFuZEZhbWluZSIsDQoJCVszNDA1XQkJCQk9ICJUcmlua2V0U3dlZXBlckx2bDEiLA0KCQlbMzQxMV0JCQkJPSAiVHJpbmtldE9yYkx2bDEiLA0KCQlbMzE2Nl0JCQkJPSAiVHJpbmtldFRvdGVtTHZsMSIsDQoJCVszNDUwXQkJCQk9ICJPZGluVHJpbmtldFJldml2ZSIsDQoJCVsyMDQxXQkJCQk9ICJJdGVtQ3J5c3RhbEZsYXNrIiwNCgkJWzIwNTRdCQkJCT0gIkl0ZW1LaW5nUG9yb1NuYWNrIiwNCgkJWzIxMzhdCQkJCT0gIkVsaXhpck9mSXJvbiIsDQoJCVsyMTM3XQkJCQk9ICJFbGl4aXJPZlJ1aW4iLA0KCQlbMjEzOV0JCQkJPSAiRWxpeGlyT2ZTb3JjZXJ5IiwNCgkJWzIxNDBdCQkJCT0gIkVsaXhpck9mV3JhdGgiLA0KCQlbMzE4NF0JCQkJPSAiT2RpbkVudHJvcGljQ2xheW1vcmUiLA0KCQlbMjA1MF0JCQkJPSAiSXRlbU1pbmlXYXJkIiwNCgkJWzM0MDFdCQkJCT0gIkhlYWx0aEJvbWIiLA0KCQlbMzM2M10JCQkJPSAiVHJpbmtldE9yYkx2bDMiLA0KCQlbMzA5Ml0JCQkJPSAiSXRlbUdsYWNpYWxTcGlrZUNhc3QiLA0KCQlbMzQ2MF0JCQkJPSAiQXNjV2FycCIsDQoJCVszMzYxXQkJCQk9ICJUcmlua2V0VG90ZW1MdmwzIiwNCgkJWzMzNjJdCQkJCT0gIlRyaW5rZXRUb3RlbUx2bDQiLA0KCQlbMzE1OV0JCQkJPSAiSGV4dGVjaFN3ZWVwZXIiLA0KCQlbMjA1MV0JCQkJPSAiSXRlbUhvcm4iLA0KCQktLVsyMDAzXQkJCT0gIlJlZ2VuZXJhdGlvblBvdGlvbiIsDQoJCVszMTQ2XQkJCQk9ICJIZXh0ZWNoR3VuYmxhZGUiLA0KCQlbMzE4N10JCQkJPSAiSGV4dGVjaFN3ZWVwZXIiLA0KCQlbMzE5MF0JCQkJPSAiSXJvblN0eWx1cyIsDQoJCVsyMDA0XQkJCQk9ICJGbGFza09mQ3J5c3RhbFdhdGVyIiwNCgkJWzMxMzldCQkJCT0gIkl0ZW1NZXJjdXJpYWwiLA0KCQlbMzIyMl0JCQkJPSAiSXRlbU1vcmVsbG9zQmFuZSIsDQoJCVszMDQyXQkJCQk9ICJNdXJhbWFuYSIsDQoJCVszMDQzXQkJCQk9ICJNdXJhbWFuYSIsDQoJCVszMTgwXQkJCQk9ICJPZHluc1ZlaWwiLA0KCQlbMzA1Nl0JCQkJPSAiSXRlbUZhaXRoU2hha2VyIiwNCgkJWzIwNDddCQkJCT0gIk9yYWNsZUV4dHJhY3RTaWdodCIsDQoJCVszMzY0XQkJCQk9ICJUcmlua2V0U3dlZXBlckx2bDMiLA0KCQlbMjA1Ml0JCQkJPSAiSXRlbVBvcm9TbmFjayIsDQoJCVszMTQwXQkJCQk9ICJRdWlja3NpbHZlclNhc2giLA0KCQlbMzE0M10JCQkJPSAiUmFuZHVpbnNPbWVuIiwNCgkJWzMwNzRdCQkJCT0gIkl0ZW1UaWFtYXRDbGVhdmUiLA0KCQlbMzgwMF0JCQkJPSAiSXRlbVJpZ2h0ZW91c0dsb3J5IiwNCgkJWzIwNDVdCQkJCT0gIkl0ZW1HaG9zdFdhcmQiLA0KCQlbMzM0Ml0JCQkJPSAiVHJpbmtldE9yYkx2bDEiLA0KCQlbMzA0MF0JCQkJPSAiSXRlbVNlcmFwaHNFbWJyYWNlIiwNCgkJWzMwNDhdCQkJCT0gIkl0ZW1TZXJhcGhzRW1icmFjZSIsDQoJCVsyMDQ5XQkJCQk9ICJJdGVtR2hvc3RXYXJkIiwNCgkJWzMzNDVdCQkJCT0gIk9kaW5Ucmlua2V0UmV2aXZlIiwNCgkJWzIwNDRdCQkJCT0gIlNpZ2h0V2FyZCIsDQoJCVszMzQxXQkJCQk9ICJUcmlua2V0U3dlZXBlckx2bDEiLA0KCQlbMzA2OV0JCQkJPSAic2h1cmVseWFzY3Jlc3QiLA0KCQlbMzU5OV0JCQkJPSAiS2FsaXN0YVBTcGVsbENhc3QiLA0KCQlbMzE4NV0JCQkJPSAiSGV4dGVjaFN3ZWVwZXIiLA0KCQlbMzA3N10JCQkJPSAiSXRlbVRpYW1hdENsZWF2ZSIsDQoJCVsyMDA5XQkJCQk9ICJJdGVtTWluaVJlZ2VuUG90aW9uIiwNCgkJWzIwMTBdCQkJCT0gIkl0ZW1NaW5pUmVnZW5Qb3Rpb24iLA0KCQlbMzAyM10JCQkJPSAiSXRlbVdyYWl0aENvbGxhciIsDQoJCVszMjkwXQkJCQk9ICJJdGVtV3JhaXRoQ29sbGFyIiwNCgkJWzIwNDNdCQkJCT0gIlZpc2lvbldhcmQiLA0KCQlbMzM0MF0JCQkJPSAiVHJpbmtldFRvdGVtTHZsMSIsDQoJCVszMDkwXQkJCQk9ICJaaG9ueWFzSG91cmdsYXNzIiwNCgkJWzMxNTRdCQkJCT0gIndyaWdnbGVsYW50ZXJuIiwNCgkJWzMxNDJdCQkJCT0gIllvdW11c0JsYWRlIiwNCgkJWzMxNTddCQkJCT0gIlpob255YXNIb3VyZ2xhc3MiLA0KCQlbMzUxMl0JCQkJPSAiSXRlbVZvaWRHYXRlIiwNCgkJWzMxMzFdCQkJCT0gIkl0ZW1Tb1REIiwNCgkJWzMxMzddCQkJCT0gIkl0ZW1EZXJ2aXNoQmxhZGUiLA0KCQlbMzM1Ml0JCQkJPSAiUmVsaWNTcG90dGVyIiwNCgkJWzMzNTBdCQkJCT0gIlRyaW5rZXRUb3RlbUx2bDIiLA0KCX0NCglfRy5JVEVNXzEJCQkJPSAwNg0KCV9HLklURU1fMgkJCQk9IDA3DQoJX0cuSVRFTV8zCQkJCT0gMDgNCglfRy5JVEVNXzQJCQkJPSAwOQ0KCV9HLklURU1fNQkJCQk9IDEwDQoJX0cuSVRFTV82CQkJCT0gMTENCglfRy5JVEVNXzcJCQkJPSAxMg0KCQ0KCV9fX0dldEludmVudG9yeVNsb3RJdGVtCT0gcmF3Z2V0KF9HLCAiR2V0SW52ZW50b3J5U2xvdEl0ZW0iKQ0KCV9HLkdldEludmVudG9yeVNsb3RJdGVtCT0gR2V0U2xvdEl0ZW0NCiAgICBteUhlcm8gPSBHZXRNeUhlcm8oKQ0KCXByaW9yaXR5VGFibGUgPSB7DQoJCQlBUCA9IHsNCgkJCQkiQW5uaWUiLCAiQWhyaSIsICJBa2FsaSIsICJBbml2aWEiLCAiQW5uaWUiLCAiQnJhbmQiLCAiQ2Fzc2lvcGVpYSIsICJEaWFuYSIsICJFdmVseW5uIiwgIkZpZGRsZVN0aWNrcyIsICJGaXp6IiwgIkdyYWdhcyIsICJIZWltZXJkaW5nZXIiLCAiS2FydGh1cyIsDQoJCQkJIkthc3NhZGluIiwgIkV6cmVhbCIsICJLYXlsZSIsICJLZW5uZW4iLCAiTGVibGFuYyIsICJMaXNzYW5kcmEiLCAiTHV4IiwgIk1hbHphaGFyIiwgIk1vcmRla2Fpc2VyIiwgIk1vcmdhbmEiLCAiTmlkYWxlZSIsICJPcmlhbm5hIiwNCgkJCQkiUnl6ZSIsICJTaW9uIiwgIlN3YWluIiwgIlN5bmRyYSIsICJUZWVtbyIsICJUd2lzdGVkRmF0ZSIsICJWZWlnYXIiLCAiVmlrdG9yIiwgIlZsYWRpbWlyIiwgIlhlcmF0aCIsICJaaWdncyIsICJaeXJhIiwgIlZlbGtveiINCgkJCX0sDQoJCQkNCgkJCVN1cHBvcnQgPSB7DQoJCQkJIkFsaXN0YXIiLCAiQmxpdHpjcmFuayIsICJKYW5uYSIsICJLYXJtYSIsICJMZW9uYSIsICJMdWx1IiwgIk5hbWkiLCAiTnVudSIsICJTb25hIiwgIlNvcmFrYSIsICJUYXJpYyIsICJUaHJlc2giLCAiWmlsZWFuIiwgIkJyYXVtIg0KCQkJfSwNCgkJCQ0KCQkJVGFuayA9IHsNCgkJCQkiQW11bXUiLCAiQ2hvZ2F0aCIsICJEck11bmRvIiwgIkdhbGlvIiwgIkhlY2FyaW0iLCAiTWFscGhpdGUiLCAiTWFva2FpIiwgIk5hc3VzIiwgIlJhbW11cyIsICJTZWp1YW5pIiwgIk5hdXRpbHVzIiwgIlNoZW4iLCAiU2luZ2VkIiwgIlNrYXJuZXIiLCAiVm9saWJlYXIiLA0KCQkJCSJXYXJ3aWNrIiwgIllvcmljayIsICJaYWMiDQoJCQl9LA0KCQkJDQoJCQlBRF9DYXJyeSA9IHsNCgkJCQkiQXNoZSIsICJDYWl0bHluIiwgIkNvcmtpIiwgIkRyYXZlbiIsICJFenJlYWwiLCAiR3JhdmVzIiwgIkpheWNlIiwgIkppbngiLCAiS29nTWF3IiwgIkx1Y2lhbiIsICJNYXN0ZXJZaSIsICJNaXNzRm9ydHVuZSIsICJQYW50aGVvbiIsICJRdWlubiIsICJTaGFjbyIsICJTaXZpciIsDQoJCQkJIlRhbG9uIiwiVHJ5bmRhbWVyZSIsICJUcmlzdGFuYSIsICJUd2l0Y2giLCAiVXJnb3QiLCAiVmFydXMiLCAiVmF5bmUiLCAiWWFzdW8iLCAiWmVkIg0KCQkJfSwNCgkJCQ0KCQkJQnJ1aXNlciA9IHsNCgkJCQkiQWF0cm94IiwgIkRhcml1cyIsICJFbGlzZSIsICJGaW9yYSIsICJHYW5ncGxhbmsiLCAiR2FyZW4iLCAiSXJlbGlhIiwgIkphcnZhbklWIiwgIkpheCIsICJLaGF6aXgiLCAiTGVlU2luIiwgIk5vY3R1cm5lIiwgIk9sYWYiLCAiUG9wcHkiLA0KCQkJCSJSZW5la3RvbiIsICJSZW5nYXIiLCAiUml2ZW4iLCAiUnVtYmxlIiwgIlNoeXZhbmEiLCAiVHJ1bmRsZSIsICJVZHlyIiwgIlZpIiwgIk1vbmtleUtpbmciLCAiWGluWmhhbyINCgkJCX0NCgl9DQoJIGlmIEdldEdhbWUoKS5tYXAuc2hvcnROYW1lID09ICJ0d2lzdGVkVHJlZWxpbmUiIHRoZW4NCgkJVHdpc3RlZFRyZWVsaW5lID0gdHJ1ZSANCgllbHNlDQoJCVR3aXN0ZWRUcmVlbGluZSA9IGZhbHNlDQoJZW5kDQoNCgljaGVja0Rpc3RhbmNlID0gMzAwMCAqIDMwMDANCglJZ25pdGVDaGVjaygpDQoJRkxvYWRMaWIoKQ0KCQ0KCQ0KICAgIF9HLm9sZERyYXdDaXJjbGUgPSByYXdnZXQoX0csICdEcmF3Q2lyY2xlJykNCglfRy5EcmF3Q2lyY2xlID0gRHJhd0NpcmNsZTINCgkNCgkgYWxseVR1cnJldENvbG9yID0gMHgwNjQ3MDAgICAgICAgICAgICAgICAgICAgICAgDQogICAgIGVuZW15VHVycmV0Q29sb3IgPSAweEZGMDAwMCAgICAgICAgICAgICANCiAgICAgdmlzaWJpbGl0eVR1cnJldENvbG9yID0gMHg0NzAwMDAgICAgICAgIA0KICAgICBkcmF3VHVycmV0cyA9IHt9DQoJIEVuZW15VGFibGUgPSBHZXRFbmVteUhlcm9lcygpDQogICAgZm9yIGksIEVuZW15IGluIHBhaXJzKEVuZW15VGFibGUpIGRvDQogICAgICAgIEVuZW15VmlzaWJsZVtpXSA9IEVuZW15LnZpc2libGUNCiAgICAgICAgRGlzdGFuY2VUb0VuZW15W2ldID0gbXlIZXJvOkdldERpc3RhbmNlKEVuZW15KQ0KICAgICAgICBUaW1lTWlzc2luZ1tpXSA9IDANCiAgICAgICAgU3VycHJpemVUaW1lW2ldID0gMA0KICAgICAgICBBcHBlYXJlZFtpXSA9IGZhbHNlDQogICAgICAgIERyYXdlZFtpXSA9IGZhbHNlDQogICAgICAgIExhc3REcmF3W2ldID0gMA0KICAgICAgICBFbmVteURlYWRbaV0gPSBmYWxzZQ0KICAgICAgICBEaXNzYXBlYXJlZFtpXSA9IGZhbHNlDQogICAgZW5kIA0KDQoJcGxhY2VkV2FyZHMgPSB7fQ0KCVRyaWdnZXJUcmFwKCkNCgkNCglQcmlvcml0eU9uTG9hZCgpDQoJDQoJTWluaW9ucyA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX0VORU1ZLCA1NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0FTQykNCglKdW5nbGVNaW5pb25zID0gbWluaW9uTWFuYWdlcihNSU5JT05fSlVOR0xFLCA1NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICANCmVuZA0KDQoNCmZ1bmN0aW9uIE9uVGljaygpDQoJdGFyZ2V0ID0gR2V0Q3VzdG9tVGFyZ2V0KCkNCglDaGVja3MoKQ0KCQ0KICAgIA0KZW5kDQoNCmZ1bmN0aW9uIE9uRHJhdygpDQoJaWYgSGF6TWVudS5EcmF3LmRyYXdxIHRoZW4NCgkJRHJhd0NpcmNsZShteUhlcm8ueCxteUhlcm8ueSxteUhlcm8ueiwzMDAsMHhDQ0ZGMzMpDQoJZW5kIAkJCQkNCglpZiBIYXpNZW51LkRyYXcuZHJhd2UgdGhlbg0KCQlEcmF3Q2lyY2xlKG15SGVyby54LG15SGVyby55LG15SGVyby56LDYzMCwweDMzMDBDQykNCgllbmQNCgkNCglpZiBIYXpNZW51LkRyYXcuZHJhd3QgYW5kIFZhbGlkVGFyZ2V0KHRhcmdldCkgdGhlbg0KCQlEcmF3Q2lyY2xlKHRhcmdldC54LCB0YXJnZXQueSwgdGFyZ2V0LnosIDgwLCBBUkdCKDI1NSwgMTAsIDI1NSwgMTApKQ0KCSAgICBEcmF3Q2lyY2xlKHRhcmdldC54LCB0YXJnZXQueSwgdGFyZ2V0LnosIDEwMCwgQVJHQigyNTUsIDEwMiwgMjA0LCA1MSkpDQoJZW5kCQ0KCQ0KCQ0KCWlmIEhhek1lbnUuQ29vbERvd25zLk9OIHRoZW4NCglDRERyYXdzKCkNCgllbmQNCglpZiBIYXpNZW51LkRyYXcuVG93ZXJSIHRoZW4NCgkgICB0dXJyZXRzKCkNCgllbmQNCglpZiBIYXpNZW51LkRyYXcuYXdhcm5lc3MuR2FuayB0aGVuDQoJICBhd2FybmVzcygpDQoJZW5kDQoJaWYgSGF6TWVudS5EcmF3LldhcmRzLk9OIHRoZW4NCgkgIHdhcmRzKCkNCgllbmQNCglpZiBIYXpNZW51LkNvbmRlbW4uYXV0b0NvbmRlbW4gYW5kIEhhek1lbnUuY29tYm9rZXkgdGhlbg0KCSAgY29uZGVtbigpDQoJZW5kDQplbmQNCg0KDQpmdW5jdGlvbiBDaGVja3MoKQ0KCUlSRUFEWSA9IChpZ25pdGUgfj0gbmlsIGFuZCBteUhlcm86Q2FuVXNlU3BlbGwoaWduaXRlKSA9PSBSRUFEWSkNCglRUkVBRFkgPSAobXlIZXJvOkNhblVzZVNwZWxsKF9RKSA9PSBSRUFEWSkJDQoJRVJFQURZID0gKG15SGVybzpDYW5Vc2VTcGVsbChfRSkgPT0gUkVBRFkpDQoJUlJFQURZID0gKG15SGVybzpDYW5Vc2VTcGVsbChfUikgPT0gUkVBRFkpDQoJDQoJTEZDZnVuYygpDQoJU3BlbGxFeHBpcmVkKCkNCgl0cmFja2VyKCkNCgl0dXJyZXRyYW5nZXMoKQ0KCWdhbmthbGVydGVyKCkNCgkNCglpZiBWYWxpZFRhcmdldCh0YXJnZXQpIHRoZW4NCgkJaWYgSGF6TWVudS5NaXNjLktTIHRoZW4gS1ModGFyZ2V0KSBlbmQNCgkJaWYgSGF6TWVudS5NaXNjLklnbml0ZSB0aGVuIEF1dG9JZ25pdGUodGFyZ2V0KSBlbmQNCgkgICAgDQoJICAgDQoJZW5kDQoJDQoJaWYgSGF6TWVudS5EcmF3LldhcmRzLk1hbnVhbCB0aGVuDQogICAgICBpZiBIYXpNZW51LkRyYXcuV2FyZHMuRGVsZXRlV2FyZCB0aGVuIERlbGV0ZVdhcmQobW91c2VQb3MueCwgbW91c2VQb3MueSwgbW91c2VQb3MueikgZW5kDQoNCiAgICAgIGlmIEhhek1lbnUuRHJhdy5XYXJkcy5QdXRXYXJkMSB0aGVuIFB1dFdhcmQobW91c2VQb3MueCwgbW91c2VQb3MueSwgbW91c2VQb3MueiwgMSAqIDYwKSBlbmQNCiAgICAgIGlmIEhhek1lbnUuRHJhdy5XYXJkcy5QdXRXYXJkMiB0aGVuIFB1dFdhcmQobW91c2VQb3MueCwgbW91c2VQb3MueSwgbW91c2VQb3MueiwgMiAqIDYwKSBlbmQNCiAgICAgIGlmIEhhek1lbnUuRHJhdy5XYXJkcy5QdXRXYXJkMyB0aGVuIFB1dFdhcmQobW91c2VQb3MueCwgbW91c2VQb3MueSwgbW91c2VQb3MueiwgMyAqIDYwKSBlbmQNCiAgICBlbmQNCgkNCgkNCgkNCglpZiBIYXpNZW51LkZhcm0uTWFuYSB0aGVuIGVuZA0KCWlmIEhhek1lbnUuSGFyYXNzLk1hbmEgdGhlbiBlbmQNCgkJDQogICAgaWYgSGF6TWVudS5jb21ib2tleSB0aGVuDQoJIGNhc3RSKCkNCgllbmQNCglpZiBIYXpNZW51Lk1pc2MuQm9yayBhbmQgSGF6TWVudS5jb21ib2tleSB0aGVuDQoJIEJvcmsoKQ0KCWVuZA0KICAgIGlmIEhhek1lbnUuTWlzYy5CaWxnZSBhbmQgSGF6TWVudS5jb21ib2tleSB0aGVuDQogICAgIEJpbGdlKCkNCiAgICBlbmQJDQplbmQNCg0KZnVuY3Rpb24gSWduaXRlQ2hlY2soKQ0KCWlmIG15SGVybzpHZXRTcGVsbERhdGEoU1VNTU9ORVJfMSkubmFtZTpmaW5kKCJzdW1tb25lcmRvdCIpIHRoZW4NCgkJaWduaXRlID0gU1VNTU9ORVJfMQ0KCWVsc2VpZiBteUhlcm86R2V0U3BlbGxEYXRhKFNVTU1PTkVSXzIpLm5hbWU6ZmluZCgic3VtbW9uZXJkb3QiKSB0aGVuDQoJCWlnbml0ZSA9IFNVTU1PTkVSXzINCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBGTG9hZExpYigpDQoJRk1lbnUoKQ0KZW5kDQoNCmZ1bmN0aW9uIEZNZW51KCkNCglIYXpNZW51ID0gc2NyaXB0Q29uZmlnKCJDbGFyaXR5IFZheW5lIiwgIlZheW5lIikNCgkJSGF6TWVudTphZGRQYXJhbSgiY29tYm9rZXkiLCAiQ29tYm8ga2V5KFNwYWNlKSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCAzMikNCgkJSGF6TWVudTphZGRQYXJhbSgiaGFyYXNza2V5IiwgIkhhcmFzcyBrZXkoQykiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIkMiKSkNCgkJSGF6TWVudTphZGRQYXJhbSgiZmFybWtleSIsICJGYXJtIGtleShWKSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiViIpKQ0KCSAgICANCgkJDQoJSGF6TWVudTphZGRUUyh0cykNCgkJDQoJSGF6TWVudTphZGRTdWJNZW51KCJDb21ibyIsICJDb21ibyIpDQoJCUhhek1lbnUuQ29tYm86YWRkUGFyYW0oImNvbWJvUSIsICJVc2UgUSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkJCQkJDQoJCUhhek1lbnUuQ29tYm86YWRkUGFyYW0oImNvbWJvUiIsICJVc2UgUiIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkJCQ0KCQlIYXpNZW51LkNvbWJvOmFkZFBhcmFtKCJmb2N1cyIsICJMZWZ0IENsaWNrIEZvY3VzIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQkgICAgCQkgDQoJCUhhek1lbnUuQ29tYm86YWRkUGFyYW0oIm1pblIiLCAiVWx0aSBvbmx5IGlmIFggZW5lbWllcyIsIFNDUklQVF9QQVJBTV9TTElDRSwgMSwgMCwgNSwgMCkgDQoJCSANCglIYXpNZW51OmFkZFN1Yk1lbnUoIkNvbmRlbW4iLCAiQ29uZGVtbiIpDQoJICAgIEhhek1lbnUuQ29uZGVtbjphZGRTdWJNZW51KCJGZWF0dXJlcyAmIFNldHRpbmdzIiwgInNldHRpbmdzU3ViTWVudSIpDQoJCUhhek1lbnUuQ29uZGVtbjphZGRTdWJNZW51KCJEaXNhYmxlIEF1dG8tQ29uZGVtbiBvbiIsICJjb25kZW1uU3ViTWVudSIpCQ0KCQlIYXpNZW51LkNvbmRlbW46YWRkUGFyYW0oImF1dG9Db25kZW1uIiwgIkF1dG8tQ29uZGVtbiBUb2dnbGU6IiwgU0NSSVBUX1BBUkFNX09OS0VZVE9HR0xFLCB0cnVlLCBHZXRLZXkoIk4iKSkNCgkJSGF6TWVudS5Db25kZW1uOmFkZFBhcmFtKCJzd2l0Y2hLZXkiLCAiU3dpdGNoIGtleSBtb2RlOiIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQoJCSAgIEhhek1lbnUuQ29uZGVtbi5zZXR0aW5nc1N1Yk1lbnU6YWRkUGFyYW0oIkNvbmRlbW5Bc3Npc3RhbnQiLCAiQ29uZGVtbiBWaXN1YWwgQXNzaXN0YW50OiIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJICAgSGF6TWVudS5Db25kZW1uLnNldHRpbmdzU3ViTWVudTphZGRQYXJhbSgicHVzaERpc3RhbmNlIiwgIlB1c2ggRGlzdGFuY2UiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDM1MCwgMCwgNDUwLCAwKQkJICAgDQoJCSAgIGlmIG5vdCBWSVBfVVNFUiB0aGVuDQoJCSAgIEhhek1lbnUuQ29uZGVtbi5zZXR0aW5nc1N1Yk1lbnU6YWRkUGFyYW0oInNob290aW5nTW9kZSIsICJDdXJyZW50bHk6IE5vIHByZWRpY3Rpb24iLCBTQ1JJUFRfUEFSQU1fSU5GTywgIk5PVCBWSVAiKQ0KCQkgICBlbHNlDQoJCSAgIEhhek1lbnUuQ29uZGVtbi5zZXR0aW5nc1N1Yk1lbnU6YWRkUGFyYW0oInNob290aW5nTW9kZSIsICJQcmVkaWN0aW9uL05vIHByZWRpY3Rpb246IiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQkgICBlbmQNCgkJSGF6TWVudS5Db25kZW1uLmF1dG9Db25kZW1uID0gdHJ1ZQ0KCQlIYXpNZW51LkNvbmRlbW4uc3dpdGNoS2V5ID0gZmFsc2UNCgkJICAgZm9yIGksIGVuZW15IGluIGlwYWlycyhlbmVteVRhYmxlKSBkbw0KCQkgICBIYXpNZW51LkNvbmRlbW4uY29uZGVtblN1Yk1lbnU6YWRkUGFyYW0oImRpc2FibGVDb25kZW1uIi4uaSwgIiA+PiAiLi5lbmVteS5jaGFyTmFtZSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCgkJICAgSGF6TWVudS5Db25kZW1uWyJkaXNhYmxlQ29uZGVtbiIuLmldID0gZmFsc2UgLS0gT3ZlcnJpZGUNCgkJICAgZW5kDQoJCQ0KICAgCUhhek1lbnU6YWRkU3ViTWVudSgiSGFyYXNzIiwgIkhhcmFzcyIpDQoJCUhhek1lbnUuSGFyYXNzOmFkZFBhcmFtKCJoYXJhc3NRIiwgIlVzZSBRIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQkJCQkNCgkgICAgSGF6TWVudS5IYXJhc3M6YWRkUGFyYW0oImhhcmFzc0UiLCAiVXNlIEUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCUhhek1lbnUuSGFyYXNzOmFkZFBhcmFtKCJNYW5hIiwgIk1hbmEgTWFuYWdlciAlIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCA1MCwgMSwgMTAwLCAwKQkJCSAgICANCgkNCiAgICBIYXpNZW51OmFkZFN1Yk1lbnUoIkZhcm0iLCAiRmFybSIpDQoJICAgIEhhek1lbnUuRmFybTphZGRQYXJhbSgiZmFybVEiLCAiVXNlIFEiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpCQkNCgkgICAgSGF6TWVudS5GYXJtOmFkZFBhcmFtKCJNYW5hIiwgIk1hbmEgTWFuYWdlciAlIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCA1MCwgMSwgMTAwLCAwKQ0KCQ0KCUhhek1lbnU6YWRkU3ViTWVudSgiTWlzYyIsICJNaXNjIikNCgkJSGF6TWVudS5NaXNjOmFkZFBhcmFtKCJLUyIsICJLaWxsU3RlYWwgd2l0aCBFIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkJCQ0KCQlIYXpNZW51Lk1pc2M6YWRkUGFyYW0oIklnbml0ZSIsICJVc2UgQXV0byBJZ25pdGUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpCSAgICANCgkJSGF6TWVudS5NaXNjOmFkZFBhcmFtKCJCb3JrIiwgIlVzZSBCb3RyayBtYXggSGVhbCIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJSGF6TWVudS5NaXNjOmFkZFBhcmFtKCJCaWxnZSIsICJVc2UgQmlsZ2V3YXRlciIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJDQoJSGF6TWVudTphZGRTdWJNZW51KCJEcmF3IiwiRHJhdyIpDQoJICBIYXpNZW51LkRyYXc6YWRkUGFyYW0oImRyYXdxIiwgIkRyYXcgUSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkgIEhhek1lbnUuRHJhdzphZGRQYXJhbSgiZHJhd3ciLCAiRHJhdyBXIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCSAgSGF6TWVudS5EcmF3OmFkZFBhcmFtKCJkcmF3ZSIsICJEcmF3IEUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJICBIYXpNZW51LkRyYXc6YWRkUGFyYW0oImRyYXdyIiwgIkRyYXcgUiIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkJICANCgkgIEhhek1lbnUuRHJhdzphZGRQYXJhbSgiZHJhd3QiLCAiRHJhdyBDaXJjbGUgb24gVGFyZ2V0IiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCSAgSGF6TWVudS5EcmF3OmFkZFN1Yk1lbnUoIlRvd2VyUiIsIlRvd2VyUiIpDQoJICAgIEhhek1lbnUuRHJhdy5Ub3dlclI6YWRkUGFyYW0oIlR1cnJldFJhbmdlcyIsICJTaG93IFR1cnJldCBSYW5nZXMiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJICAgIEhhek1lbnUuRHJhdy5Ub3dlclI6YWRkUGFyYW0oIm9ubHlDbG9zZSIsICJTaG93IG9ubHkgY2xvc2UiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIEhhek1lbnUuRHJhdy5Ub3dlclI6YWRkUGFyYW0oInNob3dBbGx5IiwgIlNob3cgYWxseSB0dXJyZXRzIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICAgSGF6TWVudS5EcmF3LlRvd2VyUjphZGRQYXJhbSgic2hvd1Zpc2liaWxpdHkiLCAiU2hvdyB0dXJyZXQgdmlldyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkgIEhhek1lbnUuRHJhdzphZGRTdWJNZW51ICgiYXdhcm5lc3MiLCJhd2FybmVzcyIpDQoJICAgIEhhek1lbnUuRHJhdy5hd2FybmVzczphZGRQYXJhbSgiR2FuayIsICJDaXJjbGUgYWxlcnQgb24gZ2Fua2VyICIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkgIEhhek1lbnUuRHJhdzphZGRTdWJNZW51KCJXYXJkcyIsIldhcmRzIikNCgkgICAgSGF6TWVudS5EcmF3LldhcmRzOmFkZFBhcmFtKCJPTiIsICJVc2UgV2FyZCB0aW1lcnMiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJICAgIEhhek1lbnUuRHJhdy5XYXJkczphZGRQYXJhbSgiT3duVGVhbSIsICJzaG93IG15IG93biB0ZWFtIHdhcmRzIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICAgSGF6TWVudS5EcmF3LldhcmRzOmFkZFBhcmFtKCJTaG93UGlua3MiLCAic2hvdyBwaW5rIHdhcmRzIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBIYXpNZW51LkRyYXcuV2FyZHM6YWRkUGFyYW0oIlNob3dUcmFwcyIsICJzaG93IHRyYXBzIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBIYXpNZW51LkRyYXcuV2FyZHM6YWRkUGFyYW0oIlBpbmdXYXJkcyIsICJwaW5nIHdhcmRzIG5lYXIgeW91IiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICAgSGF6TWVudS5EcmF3LldhcmRzOmFkZFBhcmFtKCJNYW51YWwiLCAibWFudWFsIHdhcmQgZWRpdGluZyAocHV0L2RlbGV0ZSkiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgICBIYXpNZW51LkRyYXcuV2FyZHM6YWRkUGFyYW0oIkRlbGV0ZVdhcmQiLCAiZGVsZXRlIHdhcmQiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgMCkNCiAgICAgICAgSGF6TWVudS5EcmF3LldhcmRzOmFkZFBhcmFtKCJQdXRXYXJkMSIsICJwdXQgMSBtaW51dGUgd2FyZCIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCAwKQ0KICAgICAgICBIYXpNZW51LkRyYXcuV2FyZHM6YWRkUGFyYW0oIlB1dFdhcmQyIiwgInB1dCAyIG1pbnV0ZSB3YXJkIiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIDApDQogICAgICAgIEhhek1lbnUuRHJhdy5XYXJkczphZGRQYXJhbSgiUHV0V2FyZDMiLCAicHV0IDMgbWludXRlIHdhcmQiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgMCkNCgkgIA0KCUhhek1lbnU6YWRkU3ViTWVudSgiQ29vbERvd25zIiwgIkNvb2xEb3ducyIpDQoJICAgIEhhek1lbnUuQ29vbERvd25zOmFkZFBhcmFtKCJPTiIsICJVc2UgQ0QgVHJhY2tlciIsICBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJICAgIEhhek1lbnUuQ29vbERvd25zOmFkZFBhcmFtKCJFbmFibGVkIiwgIkRyYXcgaW5kaWNhdG9ycyBpbiBlbmVtaWVzIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCSAgICBIYXpNZW51LkNvb2xEb3duczphZGRQYXJhbSgiRW5hYmxlZDIiLCAiRHJhdyBpbmRpY2F0b3JzIGluIGFsbGllcyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQoJCQ0KCQlIYXpNZW51LkNvb2xEb3duczphZGRTdWJNZW51KCJEcmF3aW5nIiwgIkRyYXdpbmciKQ0KCQkgIEhhek1lbnUuQ29vbERvd25zLkRyYXdpbmc6YWRkUGFyYW0oIkFsd2F5cyIsICJBbHdheXMgZHJhdyB0aGUgaW5kaWNhdG9ycyIsICBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJICAgICAgSGF6TWVudS5Db29sRG93bnMuRHJhd2luZzphZGRQYXJhbSgiRHJhd0tleSIsICJPbmx5IGRyYXcgd2hpbGUgaG9sZGluZyIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCAxNikNCgkJDQoJCUhhek1lbnUuQ29vbERvd25zOmFkZFN1Yk1lbnUoIkFwcGVhcmFuY2UgIiwgIkFwcGVhcmFuY2UiKQ0KCQkgIEhhek1lbnUuQ29vbERvd25zLkFwcGVhcmFuY2U6YWRkUGFyYW0oInNob3doIiwgIlNob3cgaG9yaXpvbnRhbCBpbmRpY2F0b3JzIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCSAgICAgIEhhek1lbnUuQ29vbERvd25zLkFwcGVhcmFuY2U6YWRkUGFyYW0oInZwb3NpdGlvbiIsICJIb3Jpem9udGFsIGluZGljYXRvcnMgdmVydGljYWwgcG9zaXRpb24iLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDAsIC0yNSwgMjUpDQoJICAgICAgSGF6TWVudS5Db29sRG93bnMuQXBwZWFyYW5jZTphZGRQYXJhbSgid2lkdGgiLCAiSG9yaXpvbnRhbCBpbmRpY2F0b3JzIHdpZHRoIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAyMCwgMSwgMjUpDQoJICAgICAgSGF6TWVudS5Db29sRG93bnMuQXBwZWFyYW5jZTphZGRQYXJhbSgiaGVpZ2h0IiwgIkhvcml6b250YWwgaW5kaWNhdG9ycyBoZWlnaHQiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDUsIDEsIDIwKQ0KCSAgICAgIEhhek1lbnUuQ29vbERvd25zLkFwcGVhcmFuY2U6YWRkUGFyYW0oIm4iLCAiTnVtYmVyIG9mIGhvcml6b250YWwgaW5kaWNhdG9ycyIsIFNDUklQVF9QQVJBTV9TTElDRSwgNCwgMSwgNikNCgkgICAgICBIYXpNZW51LkNvb2xEb3ducy5BcHBlYXJhbmNlOmFkZFBhcmFtKCJzaG93diIsICJTaG93IHZlcnRpY2FsIGluZGljYXRvcnMiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJICAgICAgSGF6TWVudS5Db29sRG93bnMuQXBwZWFyYW5jZTphZGRQYXJhbSgid2lkdGgyIiwgIlZlcnRpY2FsIGluZGljYXRvcnMgd2lkdGgiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDksIDEsIDI1KQ0KCSAgICAgIEhhek1lbnUuQ29vbERvd25zLkFwcGVhcmFuY2U6YWRkUGFyYW0oInRleHRzaXplIiwgIlRleHQgc2l6ZSIsIFNDUklQVF9QQVJBTV9TTElDRSwgMTMsIDEwLCAyMCkNCgkJDQoJCUhhek1lbnUuQ29vbERvd25zOmFkZFN1Yk1lbnUoIkNvbG9ycyIsICJDb2xvcnMiKQ0KCQkgIEhhek1lbnUuQ29vbERvd25zLkNvbG9yczphZGRQYXJhbSgiY2Rjb2xvciIsICJDb29sZG93biBjb2xvciIsIFNDUklQVF9QQVJBTV9DT0xPUiwgezI1NSwgMjE0LCAxMTQsIDB9KS0tb3JhbmdlDQoJICAgICAgSGF6TWVudS5Db29sRG93bnMuQ29sb3JzOmFkZFBhcmFtKCJyZWFkeWNvbG9yIiwgIlJlYWR5IGNvbG9yIiwgU0NSSVBUX1BBUkFNX0NPTE9SLCB7MjU1LCA1NCwgMjE0LCAwfSktLWdyZWVuDQoJICAgICAgSGF6TWVudS5Db29sRG93bnMuQ29sb3JzOmFkZFBhcmFtKCJ0ZXh0Y29sb3IiLCAiVGV4dCBjb2xvciIsIFNDUklQVF9QQVJBTV9DT0xPUiwgezI1NSwgMjU1LCAyNTUsIDI1NX0pLS13aGl0ZQ0KCSAgICAgIEhhek1lbnUuQ29vbERvd25zLkNvbG9yczphZGRQYXJhbSgiYmFja2dyb3VuZGNvbG9yIiwgIkJhY2tncm91bmQgY29sb3IiLCBTQ1JJUFRfUEFSQU1fQ09MT1IsIHsyNTUsIDEyOCwgMTI4LCAxMjh9KS0tZ3JleQ0KCSAgIA0KICAgCSAgICBIYXpNZW51LkNvb2xEb3ducy5Db2xvcnM6YWRkU3ViTWVudSgiU3VtbW9uZXIgU3BlbGxzIiwgIlNTcGVsbHMiKQ0KCQkgIGZvciBpLCBzcGVsbCBpbiBpcGFpcnMoU1NwZWxscykgZG8NCgkJICBIYXpNZW51LkNvb2xEb3ducy5Db2xvcnMuU1NwZWxsczphZGRQYXJhbShzcGVsbC5OYW1lLCBzcGVsbC5DTmFtZSwgU0NSSVBUX1BBUkFNX0NPTE9SLCBzcGVsbC5Db2xvcikNCgkgICAgICBlbmQNCgkJDQoJDQoJSGF6TWVudTphZGRQYXJhbSgiQUdQIiwgIkF1dG8gRSBnYXBjbG9zZXJzIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQkNCglIYXpNZW51OmFkZFBhcmFtKCJJbnRlcnJ1cHQiLCAiaW50ZXJydXB0IHdpdGggRSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkNCgkNCglIYXpNZW51OmFkZFN1Yk1lbnUoIkxhZ0ZyZWVDaXJjbGVzIiwgIkxGQyIpDQoJICBIYXpNZW51LkxGQzphZGRQYXJhbSgiTGFnRnJlZSIsICJBY3RpdmF0ZSBMYWcgRnJlZSBDaXJjbGVzIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCgkgIEhhek1lbnUuTEZDOmFkZFBhcmFtKCJDTCIsICJMZW5ndGggYmVmb3JlIFNuYXBwaW5nIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAzNTAsIDc1LCAyMDAwLCAwKQ0KCSAgSGF6TWVudS5MRkM6YWRkUGFyYW0oIkNMaW5mbyIsICJIaWdoZXIgbGVuZ3RoID0gTG93ZXIgRlBTIERyb3BzIiwgU0NSSVBUX1BBUkFNX0lORk8sICIiKQ0KCQ0KCWZvciBpID0gMSwgaGVyb01hbmFnZXIuaUNvdW50LCAxIGRvDQoJCWxvY2FsIGVuZW15ID0gaGVyb01hbmFnZXI6Z2V0SGVybyhpKQ0KCQlpZiBlbmVteS50ZWFtIH49IG15SGVyby50ZWFtIHRoZW4NCgkJCWZvciBfLCBjaGFtcCBpbiBwYWlycyhJbnRlcnJ1cHRMaXN0KSBkbw0KCQkJCWlmIGVuZW15LmNoYXJOYW1lID09IGNoYW1wLmNoYXJOYW1lIHRoZW4NCgkJCQkJdGFibGUuaW5zZXJ0KFRvSW50ZXJydXB0LCBjaGFtcC5zcGVsbE5hbWUpDQoJCQkJZW5kDQoJCQllbmQNCgkJZW5kDQoJZW5kDQoJDQoJaWYgX0cuUmVib3JuX0xvYWRlZCB0aGVuDQoJRGVsYXlBY3Rpb24oZnVuY3Rpb24oKQ0KCQlQcmludENoYXQoIjxmb250IGNvbG9yID0gXCIjRkZGRkZGXCI+W1ZheW5lXSA8L2ZvbnQ+PGZvbnQgY29sb3IgPSBcIiNGRjAwMDBcIj5TQUMgU3RhdHVzOjwvZm9udD4gPGZvbnQgY29sb3IgPSBcIiNGRkZGRkZcIj5TdWNjZXNzZnVsbHkgaW50ZWdyYXRlZC48L2ZvbnQ+IDwvZm9udD4iKQ0KCQlIYXpNZW51OmFkZFBhcmFtKCJTQUNPTiIsIltWYXluZV0gU0FDOlIgc3VwcG9ydCBpcyBhY3RpdmUuIiwgNSwgIiIpDQoJCWlzU0FDID0gdHJ1ZQ0KCWVuZCwgMTApDQoJZWxzZWlmIG5vdCBfRy5SZWJvcm5fTG9hZGVkIHRoZW4NCgkJUHJpbnRDaGF0KCI8Zm9udCBjb2xvciA9IFwiI0ZGRkZGRlwiPltWYXluZV0gPC9mb250Pjxmb250IGNvbG9yID0gXCIjRkYwMDAwXCI+T3Jid2Fsa2VyIG5vdCBmb3VuZDo8L2ZvbnQ+IDxmb250IGNvbG9yID0gXCIjRkZGRkZGXCI+U3hPcmJXYWxrIGludGVncmF0ZWQuPC9mb250PiA8L2ZvbnQ+IikNCgkJSGF6TWVudTphZGRTdWJNZW51KCJPcmJ3YWxrZXIiLCAiU3hPcmIiKQ0KCQlTeE9yYjpMb2FkVG9NZW51KEhhek1lbnUuU3hPcmIpDQoJCWlzU1ggPSB0cnVlDQoJZW5kDQoJSGF6TWVudTpwZXJtYVNob3coImNvbWJva2V5IikNCglIYXpNZW51OnBlcm1hU2hvdygiaGFyYXNza2V5IikNCglIYXpNZW51OnBlcm1hU2hvdygiZmFybWtleSIpDQoJSGF6TWVudS5Db25kZW1uOnBlcm1hU2hvdygiYXV0b0NvbmRlbW4iKQ0KZW5kDQoNCg0KDQpmdW5jdGlvbiBLUyhlbmVteSkgIAkNCiAgICBpZiBFLklzUmVhZHkoKSBhbmQgZ2V0RG1nKCJFIiwgZW5lbXksIG15SGVybykgPiBlbmVteS5oZWFsdGggdGhlbg0KCQlpZiBHZXREaXN0YW5jZShlbmVteSwgbXlIZXJvKSA8PSBFLnJhbmdlIGFuZCBIYXpNZW51Lk1pc2MuS1MgdGhlbiAJCQkNCgkJCQlDYXN0U3BlbGwoX0UsIGVuZW15KQ0KCQkgICAgDQoJCWVuZA0KCWVuZA0KCQ0KZW5kDQoNCg0KZnVuY3Rpb24gQXV0b0lnbml0ZShlbmVteSkNCiAgCWlEbWcgPSAoKElSRUFEWSBhbmQgZ2V0RG1nKCJJR05JVEUiLCBlbmVteSwgbXlIZXJvKSkgb3IgMCkNCglzaURtZyA9IChpRG1nICsgNzApDQoJaWYgZW5lbXkuaGVhbHRoIDw9IHNpRG1nIGFuZCBHZXREaXN0YW5jZShlbmVteSkgPD0gNjAwIGFuZCBpZ25pdGUgfj0gbmlsDQoJCXRoZW4NCgkJCWlmIElSRUFEWSB0aGVuIENhc3RTcGVsbChpZ25pdGUsIGVuZW15KSBlbmQNCgllbmQNCmVuZA0KDQoNCi0tQmlnIFROWCB0byBNYW5jaXV6eiBmb3IgdGhpcyBwYXJ0DQoNCg0KZnVuY3Rpb24gT25Qcm9jZXNzU3BlbGwodW5pdCwgc3BlbGwpIA0KICAgIAkNCglpZiBIYXpNZW51LkludGVycnVwdCBhbmQgRS5Jc1JlYWR5KCkgYW5kICNUb0ludGVycnVwdCA+IDAgdGhlbg0KCQlmb3IgXywgYWJpbGl0eSBpbiBwYWlycyhUb0ludGVycnVwdCkgZG8NCgkJCWlmIHNwZWxsLm5hbWUgPT0gYWJpbGl0eSBhbmQgdW5pdC50ZWFtIH49IG15SGVyby50ZWFtIHRoZW4NCgkJCQlpZiBHZXREaXN0YW5jZSh1bml0KSA8PSA0NTAgdGhlbiBDYXN0U3BlbGwoX0UsIHVuaXQpIGVuZA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KCWlmIEhhek1lbnUuQUdQIGFuZCBFLklzUmVhZHkoKSB0aGVuDQoJICAgICAgICBsb2NhbCBqYXJ2YW5BZGRpdGlvbiA9IHVuaXQuY2hhck5hbWUgPT0gIkphcnZhbklWIiBhbmQgdW5pdDpDYW5Vc2VTcGVsbChfUSkgfj0gUkVBRFkgYW5kIF9SIG9yIF9RDQoJCQlsb2NhbCBpc0FHYXBjbG9zZXJVbml0ID0gew0KCQkJCVsnQWF0cm94J10gICAgICA9IHt0cnVlLCBzcGVsbCA9IF9RLCAgICAgICAgICAgICAgICAgIHJhbmdlID0gMTAwMCwgIHByb2pTcGVlZCA9IDEyMDAsIH0sDQoJCQkJWydBa2FsaSddICAgICAgID0ge3RydWUsIHNwZWxsID0gX1IsICAgICAgICAgICAgICAgICAgcmFuZ2UgPSA4MDAsICAgcHJvalNwZWVkID0gMjIwMCwgfSwgDQoJCQkJWydBbGlzdGFyJ10gICAgID0ge3RydWUsIHNwZWxsID0gX1csICAgICAgICAgICAgICAgICAgcmFuZ2UgPSA2NTAsICAgcHJvalNwZWVkID0gMjAwMCwgfSwgDQoJCQkJWydEaWFuYSddICAgICAgID0ge3RydWUsIHNwZWxsID0gX1IsICAgICAgICAgICAgICAgICAgcmFuZ2UgPSA4MjUsICAgcHJvalNwZWVkID0gMjAwMCwgfSwgDQoJCQkJWydHcmFnYXMnXSAgICAgID0ge3RydWUsIHNwZWxsID0gX0UsICAgICAgICAgICAgICAgICAgcmFuZ2UgPSA2MDAsICAgcHJvalNwZWVkID0gMjAwMCwgfSwNCgkJCQlbJ0hlY2FyaW0nXSAgICAgPSB7dHJ1ZSwgc3BlbGwgPSBfUiwgICAgICAgICAgICAgICAgICByYW5nZSA9IDEwMDAsICBwcm9qU3BlZWQgPSAxMjAwLCB9LA0KCQkJCVsnSXJlbGlhJ10gICAgICA9IHt0cnVlLCBzcGVsbCA9IF9RLCAgICAgICAgICAgICAgICAgIHJhbmdlID0gNjUwLCAgIHByb2pTcGVlZCA9IDIyMDAsIH0sIA0KCQkJCVsnSmFydmFuSVYnXSAgICA9IHt0cnVlLCBzcGVsbCA9IGphcnZhbkFkZGl0aW9uLCAgICAgIHJhbmdlID0gNzcwLCAgIHByb2pTcGVlZCA9IDIwMDAsIH0sIA0KCQkJCVsnSmF4J10gICAgICAgICA9IHt0cnVlLCBzcGVsbCA9IF9RLCAgICAgICAgICAgICAgICAgIHJhbmdlID0gNzAwLCAgIHByb2pTcGVlZCA9IDIwMDAsIH0sIA0KCQkJCVsnSmF5Y2UnXSAgICAgICA9IHt0cnVlLCBzcGVsbCA9ICdKYXljZVRvVGhlU2tpZXMnLCAgIHJhbmdlID0gNjAwLCAgIHByb2pTcGVlZCA9IDIwMDAsIH0sIA0KCQkJCVsnS2hheml4J10gICAgICA9IHt0cnVlLCBzcGVsbCA9IF9FLCAgICAgICAgICAgICAgICAgIHJhbmdlID0gOTAwLCAgIHByb2pTcGVlZCA9IDIwMDAsIH0sDQoJCQkJWydMZWJsYW5jJ10gICAgID0ge3RydWUsIHNwZWxsID0gX1csICAgICAgICAgICAgICAgICAgcmFuZ2UgPSA2MDAsICAgcHJvalNwZWVkID0gMjAwMCwgfSwNCgkJCQlbJ0xlZVNpbiddICAgICAgPSB7dHJ1ZSwgc3BlbGwgPSAnYmxpbmRtb25rcXR3bycsICAgICByYW5nZSA9IDEzMDAsICBwcm9qU3BlZWQgPSAxODAwLCB9LA0KCQkJCVsnTGVvbmEnXSAgICAgICA9IHt0cnVlLCBzcGVsbCA9IF9FLCAgICAgICAgICAgICAgICAgIHJhbmdlID0gOTAwLCAgIHByb2pTcGVlZCA9IDIwMDAsIH0sDQoJCQkJWydNYWxwaGl0ZSddICAgID0ge3RydWUsIHNwZWxsID0gX1IsICAgICAgICAgICAgICAgICAgcmFuZ2UgPSAxMDAwLCAgcHJvalNwZWVkID0gMTUwMCArIHVuaXQubXN9LA0KCQkJCVsnTWFva2FpJ10gICAgICA9IHt0cnVlLCBzcGVsbCA9IF9RLCAgICAgICAgICAgICAgICAgIHJhbmdlID0gNjAwLCAgIHByb2pTcGVlZCA9IDEyMDAsIH0sIA0KCQkJCVsnTW9ua2V5S2luZyddICA9IHt0cnVlLCBzcGVsbCA9IF9FLCAgICAgICAgICAgICAgICAgIHJhbmdlID0gNjUwLCAgIHByb2pTcGVlZCA9IDIyMDAsIH0sIA0KCQkJCVsnUGFudGhlb24nXSAgICA9IHt0cnVlLCBzcGVsbCA9IF9XLCAgICAgICAgICAgICAgICAgIHJhbmdlID0gNjAwLCAgIHByb2pTcGVlZCA9IDIwMDAsIH0sIA0KCQkJCVsnUG9wcHknXSAgICAgICA9IHt0cnVlLCBzcGVsbCA9IF9FLCAgICAgICAgICAgICAgICAgIHJhbmdlID0gNTI1LCAgIHByb2pTcGVlZCA9IDIwMDAsIH0sIA0KCQkJCVsnUmVuZWt0b24nXSAgICA9IHt0cnVlLCBzcGVsbCA9IF9FLCAgICAgICAgICAgICAgICAgIHJhbmdlID0gNDUwLCAgIHByb2pTcGVlZCA9IDIwMDAsIH0sDQoJCQkJWydTZWp1YW5pJ10gICAgID0ge3RydWUsIHNwZWxsID0gX1EsICAgICAgICAgICAgICAgICAgcmFuZ2UgPSA2NTAsICAgcHJvalNwZWVkID0gMjAwMCwgfSwNCgkJCQlbJ1NoZW4nXSAgICAgICAgPSB7dHJ1ZSwgc3BlbGwgPSBfRSwgICAgICAgICAgICAgICAgICByYW5nZSA9IDU3NSwgICBwcm9qU3BlZWQgPSAyMDAwLCB9LA0KCQkJCVsnVHJpc3RhbmEnXSAgICA9IHt0cnVlLCBzcGVsbCA9IF9XLCAgICAgICAgICAgICAgICAgIHJhbmdlID0gOTAwLCAgIHByb2pTcGVlZCA9IDIwMDAsIH0sDQoJCQkJWydUcnluZGFtZXJlJ10gID0ge3RydWUsIHNwZWxsID0gJ1NsYXNoJywgICAgICAgICAgICAgcmFuZ2UgPSA2NTAsICAgcHJvalNwZWVkID0gMTQ1MCwgfSwNCgkJCQlbJ1hpblpoYW8nXSAgICAgPSB7dHJ1ZSwgc3BlbGwgPSBfRSwgICAgICAgICAgICAgICAgICByYW5nZSA9IDY1MCwgICBwcm9qU3BlZWQgPSAyMDAwLCB9LCANCgkJCX0NCgkJCWlmIHVuaXQudHlwZSA9PSBteUhlcm8udHlwZSBhbmQgdW5pdC50ZWFtIH49IG15SGVyby50ZWFtIGFuZCBpc0FHYXBjbG9zZXJVbml0W3VuaXQuY2hhck5hbWVdIGFuZCBHZXREaXN0YW5jZSh1bml0KSA8IDIwMDAgYW5kIHNwZWxsIH49IG5pbCB0aGVuDQoJCQkJaWYgc3BlbGwubmFtZSA9PSAodHlwZShpc0FHYXBjbG9zZXJVbml0W3VuaXQuY2hhck5hbWVdLnNwZWxsKSA9PSAnbnVtYmVyJyBhbmQgdW5pdDpHZXRTcGVsbERhdGEoaXNBR2FwY2xvc2VyVW5pdFt1bml0LmNoYXJOYW1lXS5zcGVsbCkubmFtZSBvciBpc0FHYXBjbG9zZXJVbml0W3VuaXQuY2hhck5hbWVdLnNwZWxsKSB0aGVuDQoJCQkJCWlmIHNwZWxsLnRhcmdldCB+PSBuaWwgYW5kIHNwZWxsLnRhcmdldC5pc01lIG9yIGlzQUdhcGNsb3NlclVuaXRbdW5pdC5jaGFyTmFtZV0uc3BlbGwgPT0gJ2JsaW5kbW9ua3F0d28nIHRoZW4NCgkJCQkJCWlmIEUuSXNSZWFkeSgpIHRoZW4NCgkJCQkJCQlFLnRhcmdldCA9IHVuaXQNCgkJCQkJCQlDYXN0U3BlbGwoX0UsIHVuaXQpDQoJCQkJCQllbmQNCgkJCQkJZWxzZQ0KCQkJCQkJc3BlbGxFeHBpcmVkID0gZmFsc2UNCgkJCQkJCWluZm9ybWF0aW9uVGFibGUgPSB7DQoJCQkJCQkJc3BlbGxTb3VyY2UgPSB1bml0LA0KCQkJCQkJCXNwZWxsQ2FzdGVkVGljayA9IEdldFRpY2tDb3VudCgpLA0KCQkJCQkJCXNwZWxsU3RhcnRQb3MgPSBQb2ludChzcGVsbC5zdGFydFBvcy54LCBzcGVsbC5zdGFydFBvcy56KSwNCgkJCQkJCQlzcGVsbEVuZFBvcyA9IFBvaW50KHNwZWxsLmVuZFBvcy54LCBzcGVsbC5lbmRQb3MueiksDQoJCQkJCQkJc3BlbGxSYW5nZSA9IGlzQUdhcGNsb3NlclVuaXRbdW5pdC5jaGFyTmFtZV0ucmFuZ2UsDQoJCQkJCQkJc3BlbGxTcGVlZCA9IGlzQUdhcGNsb3NlclVuaXRbdW5pdC5jaGFyTmFtZV0ucHJvalNwZWVkDQoJCQkJCQl9DQoJCQkJCWVuZA0KCQkJCWVuZA0KCQkJZW5kDQoJCQ0KICAgIGVuZA0KICAgIGlmIHVuaXQudHlwZSA9PSAib2JqX0FJX0hlcm8iIHRoZW4NCgkJZm9yIF8sdHlwZSBpbiBpcGFpcnModHlwZXMpIGRvDQoJCQlpZiB0eXBlLnNwZWxsTmFtZSA9PSBzcGVsbC5uYW1lIHRoZW4NCg0KICAgICAgICBsb2NhbCB3YXJkUG9zID0gR2V0TGFuZGluZ1BvcyhzcGVsbC5lbmRQb3MpDQoNCiAgICAgICAgaWYgRmluZE9iakF0KHdhcmRQb3MueCwgd2FyZFBvcy55LCB3YXJkUG9zLnopID09IG5pbCB0aGVuDQogIAkJCQlwbGFjZWRXYXJkc1sic3BlbGw6IiAuLiBHZXRUaWNrQ291bnQoKV0gPSB7IHggPSB3YXJkUG9zLngsIHkgPSB3YXJkUG9zLnksIHogPSB3YXJkUG9zLnosIHZpc2lvblJhbmdlID0gdHlwZS5zaWdodFJhbmdlLCBjb2xvciA9IHR5cGUuY29sb3IsIHRyaWdnZXJSYW5nZSA9IHR5cGUudHJpZ2dlclJhbmdlLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Bhd25UaW1lID0gR2V0VGlja0NvdW50KCksIGR1cmF0aW9uID0gdHlwZS5kdXJhdGlvbiwgY3JlYXRvciA9IHVuaXQsIHRlYW0gPSB1bml0LnRlYW0sIHRyYXAgPSB0eXBlLnRyYXAgfQ0KICAgICAgICBlbmQNCgkJCWVuZA0KDQoJCWVuZA0KDQogICAgZW5kDQoJDQoJDQoJIGlmIHVuaXQuaXNNZSBhbmQgc3BlbGwubmFtZTpsb3dlcigpOmZpbmQoImF0dGFjayIpIGFuZCBIYXpNZW51LmNvbWJva2V5IGFuZCBIYXpNZW51LkNvbWJvLmNvbWJvUSBhbmQgUS5Jc1JlYWR5KCkgdGhlbg0KICAgICAgICBTcGVsbFRhcmdldCA9IHNwZWxsLnRhcmdldA0KICAgICAgICBpZiBTcGVsbFRhcmdldC50eXBlID09IG15SGVyby50eXBlIHRoZW4NCiAgICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgQ2FzdFNwZWxsKF9RLCBtb3VzZVBvcy54LCBtb3VzZVBvcy56KSBlbmQsIHNwZWxsLndpbmRVcFRpbWUgLSBHZXRMYXRlbmN5KCkgLyAyMDAwKQ0KICAgICAgICBlbmQNCiAgICBlbmQNCiAgICBpZiBIYXpNZW51LmZhcm1rZXkgYW5kIFEuSXNSZWFkeSgpIHRoZW4NCgkgICAgTWluaW9uczp1cGRhdGUoKQ0KCQkgICAgZm9yIGksIE1pbmlvbiBpbiBwYWlycyhNaW5pb25zLm9iamVjdHMpIGRvDQoJCQkgICAgIA0KICAgICAgICAgICAgICAgICAgICAgaWYgdW5pdC5pc01lIGFuZCBzcGVsbC5uYW1lOmxvd2VyKCk6ZmluZCgiYXR0YWNrIikgYW5kIEhhek1lbnUuZmFybWtleSBhbmQgSGF6TWVudS5GYXJtLmZhcm1RIGFuZCBteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gSGF6TWVudS5GYXJtLk1hbmEgLzEwMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBTcGVsbFRhcmdldCA9IHNwZWxsLnRhcmdldA0KICAgICAgICAgICAgICAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIENhc3RTcGVsbChfUSwgbW91c2VQb3MueCwgbW91c2VQb3MueikgZW5kLCBzcGVsbC53aW5kVXBUaW1lIC0gR2V0TGF0ZW5jeSgpIC8gMjAwMCkNCiAgICAgICAgICAgICAgICAgICAgICBlbmQNCgkJCQkJICANCgkJCWVuZAkNCiAgICAgICAgSnVuZ2xlTWluaW9uczp1cGRhdGUoKQ0KICAgICAgICAgICAgZm9yIGksIE1pbmlvbiBpbiBwYWlycyhKdW5nbGVNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICAgICAgICAgICAgaWYgdW5pdC5pc01lIGFuZCBzcGVsbC5uYW1lOmxvd2VyKCk6ZmluZCgiYXR0YWNrIikgYW5kIEhhek1lbnUuZmFybWtleSBhbmQgSGF6TWVudS5GYXJtLmZhcm1RIGFuZCBteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gSGF6TWVudS5GYXJtLk1hbmEgLzEwMCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBTcGVsbFRhcmdldCA9IHNwZWxsLnRhcmdldA0KICAgICAgICAgICAgICAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIENhc3RTcGVsbChfUSwgbW91c2VQb3MueCwgbW91c2VQb3MueikgZW5kLCBzcGVsbC53aW5kVXBUaW1lIC0gR2V0TGF0ZW5jeSgpIC8gMjAwMCkNCiAgICAgICAgICAgICAgICBlbmQNCgkJCWVuZA0KCWVuZA0KCQ0KCWlmIFEuSXNSZWFkeSgpIGFuZCBIYXpNZW51LmhhcmFzc2tleSB0aGVuDQoJICAgIGlmIHVuaXQuaXNNZSBhbmQgc3BlbGwubmFtZTpsb3dlcigpOmZpbmQoImF0dGFjayIpIGFuZCBIYXpNZW51LkhhcmFzcy5oYXJhc3NRIGFuZCBteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gSGF6TWVudS5IYXJhc3MuTWFuYSAvMTAwIHRoZW4NCiAgICAgICAgICAgU3BlbGxUYXJnZXQgPSBzcGVsbC50YXJnZXQNCiAgICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgQ2FzdFNwZWxsKF9RLCBtb3VzZVBvcy54LCBtb3VzZVBvcy56KSBlbmQsIHNwZWxsLndpbmRVcFRpbWUgLSBHZXRMYXRlbmN5KCkgLyAyMDAwKQkJCQ0KICAgICAgICBlbmQJICAgDQoJZW5kDQoJDQoJaWYgSGF6TWVudS5oYXJhc3NrZXkgYW5kIEhhek1lbnUuSGFyYXNzLmhhcmFzc0UgYW5kIEUuSXNSZWFkeSgpIHRoZW4NCgkgaWYgdW5pdC5pc01lIGFuZCBzcGVsbC5uYW1lID09ICJWYXluZVR1bWJsZSIgYW5kIG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBIYXpNZW51LkhhcmFzcy5NYW5hIC8xMDAgdGhlbiAJCQ0KCSAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgQ2FzdFNwZWxsKF9FLCB0YXJnZXQpIGVuZCwgMC41KQkNCgkgICAgZW5kDQoJZW5kDQplbmQJCQkNCg0KDQoNCmZ1bmN0aW9uIFNwZWxsRXhwaXJlZCgpDQoJaWYgVmFsaWRUYXJnZXQodGFyZ2V0KSB0aGVuDQoJaWYgSGF6TWVudS5BR1AgYW5kIG5vdCBzcGVsbEV4cGlyZWQgYW5kIChHZXRUaWNrQ291bnQoKSAtIGluZm9ybWF0aW9uVGFibGUuc3BlbGxDYXN0ZWRUaWNrKSA8PSAoaW5mb3JtYXRpb25UYWJsZS5zcGVsbFJhbmdlIC8gaW5mb3JtYXRpb25UYWJsZS5zcGVsbFNwZWVkKSAqIDEwMDAgdGhlbg0KCQlsb2NhbCBzcGVsbERpcmVjdGlvbiAgICAgPSAoaW5mb3JtYXRpb25UYWJsZS5zcGVsbEVuZFBvcyAtIGluZm9ybWF0aW9uVGFibGUuc3BlbGxTdGFydFBvcyk6bm9ybWFsaXplZCgpDQoJCWxvY2FsIHNwZWxsU3RhcnRQb3NpdGlvbiA9IGluZm9ybWF0aW9uVGFibGUuc3BlbGxTdGFydFBvcyArIHNwZWxsRGlyZWN0aW9uDQoJCWxvY2FsIHNwZWxsRW5kUG9zaXRpb24gICA9IGluZm9ybWF0aW9uVGFibGUuc3BlbGxTdGFydFBvcyArIHNwZWxsRGlyZWN0aW9uICogaW5mb3JtYXRpb25UYWJsZS5zcGVsbFJhbmdlDQoJCWxvY2FsIGhlcm9Qb3NpdGlvbiA9IFBvaW50KG15SGVyby54LCBteUhlcm8ueikNCgkJbG9jYWwgbGluZVNlZ21lbnQgPSBMaW5lU2VnbWVudChQb2ludChzcGVsbFN0YXJ0UG9zaXRpb24ueCwgc3BlbGxTdGFydFBvc2l0aW9uLnkpLCBQb2ludChzcGVsbEVuZFBvc2l0aW9uLngsIHNwZWxsRW5kUG9zaXRpb24ueSkpDQoJDQoJCQlsb2NhbCBsaW5lU2VnbWVudCA9IExpbmVTZWdtZW50KFBvaW50KHNwZWxsU3RhcnRQb3NpdGlvbi54LCBzcGVsbFN0YXJ0UG9zaXRpb24ueSksIFBvaW50KHNwZWxsRW5kUG9zaXRpb24ueCwgc3BlbGxFbmRQb3NpdGlvbi55KSkNCgkJCQ0KICAgICAgICANCgkJCWlmIGxpbmVTZWdtZW50OmRpc3RhbmNlKGhlcm9Qb3NpdGlvbikgPD0gNDAwIGFuZCBFLklzUmVhZHkoKSB0aGVuDQoJCQkJDQoJCQkJQ2FzdFNwZWxsKF9FLCB0YXJnZXQpDQoJCQllbmQNCg0KCQllbHNlDQoJCQlzcGVsbEV4cGlyZWQgPSB0cnVlDQoJCQlpbmZvcm1hdGlvblRhYmxlID0ge30NCgkJZW5kDQogICAgIGVuZCAgIA0KICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICANCiAgICANCmVuZA0KDQoNCg0KZnVuY3Rpb24gTEZDZnVuYygpDQoJaWYgbm90IEhhek1lbnUuTEZDLkxhZ0ZyZWUgdGhlbiBfRy5EcmF3Q2lyY2xlID0gX0cub2xkRHJhd0NpcmNsZSBlbmQNCiAgICBpZiBIYXpNZW51LkxGQy5MYWdGcmVlIHRoZW4gX0cuRHJhd0NpcmNsZSA9IERyYXdDaXJjbGUyIGVuZA0KZW5kDQoNCi0tIEJhcmFzaWEsIHZhZGFzaCwgdmlzZXZlcnNhDQoNCmZ1bmN0aW9uIERyYXdDaXJjbGVOZXh0THZsKHgsIHksIHosIHJhZGl1cywgd2lkdGgsIGNvbG9yLCBjaG9yZGxlbmd0aCkNCglyYWRpdXMgPSByYWRpdXMgb3IgMzAwDQoJcXVhbGl0eSA9IG1hdGgubWF4KDgscm91bmQoMTgwL21hdGguZGVnKChtYXRoLmFzaW4oKGNob3JkbGVuZ3RoLygyKnJhZGl1cykpKSkpKSkNCglxdWFsaXR5ID0gMiAqIG1hdGgucGkgLyBxdWFsaXR5DQoJcmFkaXVzID0gcmFkaXVzKi45Mg0KCWxvY2FsIHBvaW50cyA9IHt9DQoJZm9yIHRoZXRhID0gMCwgMiAqIG1hdGgucGkgKyBxdWFsaXR5LCBxdWFsaXR5IGRvDQoJCWxvY2FsIGMgPSBXb3JsZFRvU2NyZWVuKEQzRFhWRUNUT1IzKHggKyByYWRpdXMgKiBtYXRoLmNvcyh0aGV0YSksIHksIHogLSByYWRpdXMgKiBtYXRoLnNpbih0aGV0YSkpKQ0KCQlwb2ludHNbI3BvaW50cyArIDFdID0gRDNEWFZFQ1RPUjIoYy54LCBjLnkpDQoJZW5kDQoJRHJhd0xpbmVzMihwb2ludHMsIHdpZHRoIG9yIDEsIGNvbG9yIG9yIDQyOTQ5NjcyOTUpDQplbmQNCg0KZnVuY3Rpb24gcm91bmQobnVtKSANCglpZiBudW0gPj0gMCB0aGVuIHJldHVybiBtYXRoLmZsb29yKG51bSsuNSkgZWxzZSByZXR1cm4gbWF0aC5jZWlsKG51bS0uNSkgZW5kDQplbmQNCg0KZnVuY3Rpb24gRHJhd0NpcmNsZTIoeCwgeSwgeiwgcmFkaXVzLCBjb2xvcikNCglsb2NhbCB2UG9zMSA9IFZlY3Rvcih4LCB5LCB6KQ0KCWxvY2FsIHZQb3MyID0gVmVjdG9yKGNhbWVyYVBvcy54LCBjYW1lcmFQb3MueSwgY2FtZXJhUG9zLnopDQoJbG9jYWwgdFBvcyA9IHZQb3MxIC0gKHZQb3MxIC0gdlBvczIpOm5vcm1hbGl6ZWQoKSAqIHJhZGl1cw0KCWxvY2FsIHNQb3MgPSBXb3JsZFRvU2NyZWVuKEQzRFhWRUNUT1IzKHRQb3MueCwgdFBvcy55LCB0UG9zLnopKQ0KCWlmIE9uU2NyZWVuKHsgeCA9IHNQb3MueCwgeSA9IHNQb3MueSB9LCB7IHggPSBzUG9zLngsIHkgPSBzUG9zLnkgfSkgdGhlbg0KCQlEcmF3Q2lyY2xlTmV4dEx2bCh4LCB5LCB6LCByYWRpdXMsIDEsIGNvbG9yLCBIYXpNZW51LkxGQy5DTCkgDQoJZW5kDQplbmQNCg0KDQoNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tSXRlbXMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQoNCmZ1bmN0aW9uIEdldFNsb3RJdGVtKGlkLCB1bml0KQ0KCQ0KCXVuaXQgCQk9IHVuaXQgb3IgbXlIZXJvDQoNCglpZiAobm90IEl0ZW1OYW1lc1tpZF0pIHRoZW4NCgkJcmV0dXJuIF9fX0dldEludmVudG9yeVNsb3RJdGVtKGlkLCB1bml0KQ0KCWVuZA0KDQoJbG9jYWwgbmFtZQk9IEl0ZW1OYW1lc1tpZF0NCgkNCglmb3Igc2xvdCA9IElURU1fMSwgSVRFTV83IGRvDQoJCWxvY2FsIGl0ZW0gPSB1bml0OkdldFNwZWxsRGF0YShzbG90KS5uYW1lDQoJCWlmICgoI2l0ZW0gPiAwKSBhbmQgKGl0ZW06bG93ZXIoKSA9PSBuYW1lOmxvd2VyKCkpKSB0aGVuDQoJCQlyZXR1cm4gc2xvdA0KCQllbmQNCgllbmQNCg0KZW5kDQoNCg0KDQpmdW5jdGlvbiBCb3JrKCkNCiAgICBpZiBWYWxpZFRhcmdldCh0YXJnZXQpIHRoZW4NCglsb2NhbCBTbG90ID0gR2V0SW52ZW50b3J5U2xvdEl0ZW0oMzE1MykNCgkJaWYgU2xvdCB+PSBuaWwgYW5kIG15SGVybzpDYW5Vc2VTcGVsbChTbG90KSA9PSBSRUFEWSB0aGVuDQoJCQlsb2NhbCBSYW5nZSA9IDYzMA0KCQkJDQoJCQlsb2NhbCBoZWFsdGggPSBteUhlcm8uaGVhbHRoDQoJCQlsb2NhbCBtYXhIZWFsdGggPSBteUhlcm8ubWF4SGVhbHRoDQoJCQkJaWYgKChtYXhIZWFsdGgpKjAuNykgPj0gaGVhbHRoIHRoZW4NCgkJCUNhc3RTcGVsbChTbG90LCB0YXJnZXQpDQoJCWVuZA0KCWVuZA0KCWVuZA0KZW5kDQoNCg0KZnVuY3Rpb24gQmlsZ2UoKQ0KICAgIGlmIFZhbGlkVGFyZ2V0KHRhcmdldCkgdGhlbg0KCWxvY2FsIFNsb3QgPSBHZXRJbnZlbnRvcnlTbG90SXRlbSgzMTQ0KQ0KCQlpZiBTbG90IH49IG5pbCBhbmQgbXlIZXJvOkNhblVzZVNwZWxsKFNsb3QpID09IFJFQURZIHRoZW4NCgkJCWxvY2FsIFJhbmdlID0gNjMwDQoJCQkNCgkJCWxvY2FsIGhlYWx0aCA9IG15SGVyby5oZWFsdGgNCgkJCWxvY2FsIG1heEhlYWx0aCA9IG15SGVyby5tYXhIZWFsdGgNCgkJCQlpZiAoKG1heEhlYWx0aCkqMC43KSA+PSBoZWFsdGggdGhlbg0KCQkJQ2FzdFNwZWxsKFNsb3QsIHRhcmdldCkNCgkJZW5kDQoJZW5kDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gQ291bnRFbmVteUhlcm9JblJhbmdlKHJhbmdlKQ0KCWxvY2FsIGVuZW15SW5SYW5nZSA9IDANCgkJZm9yIGkgPSAxLCBoZXJvTWFuYWdlci5pQ291bnQsIDEgZG8NCgkJCWxvY2FsIGhlcm8gPSBoZXJvTWFuYWdlcjpnZXRIZXJvKGkpDQoJCQkJaWYgVmFsaWRUYXJnZXQoaGVybyxyYW5nZSkgdGhlbg0KCQkJZW5lbXlJblJhbmdlID0gZW5lbXlJblJhbmdlICsgMQ0KCQkJZW5kDQoJCWVuZA0KCXJldHVybiBlbmVteUluUmFuZ2UNCmVuZA0KDQoNCg0KZnVuY3Rpb24gY2FzdFIoKQ0KICAgICAgICBsb2NhbCBBbW91bnQgPSBIYXpNZW51LkNvbWJvLm1pblINCgkJbG9jYWwgUmFuZ2UgPSAxMTAwDQoJICAgIGlmIFIuSXNSZWFkeSgpIGFuZCBIYXpNZW51LkNvbWJvLmNvbWJvUiB0aGVuDQoJCSAgICBpZiBDb3VudEVuZW15SGVyb0luUmFuZ2UoUmFuZ2UpID49IEFtb3VudCB0aGVuCQkJICAgICANCgkJCSBDYXN0U3BlbGwoX1IpCQkgICAgICAgDQoJCSAgICBlbmQJDQoJICAgIGVuZA0KZW5kDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KZnVuY3Rpb24gY29uZGVtbigpDQogICAgIGlmIG15SGVyby5kZWFkIHRoZW4gcmV0dXJuIGVuZA0KIA0KICAgIGlmIElzS2V5RG93bihBbGxDbGFzc01lbnUpIHRoZW4NCiAgICAgICAgSGF6TWVudS5Db25kZW1uLl9wYXJhbVsxXS5wVHlwZSA9IFZheW5lQXNzaXN0YW50LnN3aXRjaEtleSBhbmQgMiBvciAzDQogICAgICAgIEhhek1lbnUuQ29uZGVtbi5fcGFyYW1bMV0udGV4dCAgPSBWYXluZUFzc2lzdGFudC5zd2l0Y2hLZXkgYW5kICJBdXRvLUNvbmRlbW4gT25Ib2xkOiIgb3IgIkF1dG8tQ29uZGVtbiBUb2dnbGU6Ig0KICAgICAgICBpZiBIYXpNZW51LkNvbmRlbW4uc3dpdGNoS2V5IGFuZCBIYXpNZW51LkNvbmRlbW4uYXV0b0NvbmRlbW4gdGhlbg0KICAgICAgICAgICAgSGF6TWVudS5Db25kZW1uLmF1dG9Db25kZW1uID0gZmFsc2UNCiAgICAgICAgZW5kDQogDQogICAgICAgIEhhek1lbnUuQ29uZGVtbi5zZXR0aW5nc1N1Yk1lbnUuX3BhcmFtWzVdLnRleHQgID0gSGF6TWVudS5Db25kZW1uLnNldHRpbmdzU3ViTWVudS5zaG9vdGluZ01vZGUgYW5kIFZJUF9VU0VSIGFuZCAiQ3VycmVudGx5OiBVc2luZyBQcmVkaWN0aW9ucyIgb3IgIkN1cnJlbnRseTogTm8gcHJlZGljdGlvbiINCiAgICAgICAgaWYgbm90IFZJUF9VU0VSIHRoZW4gSGF6TWVudS5Db25kZW1uLnNldHRpbmdzU3ViTWVudS5zaG9vdGluZ01vZGUgPSAiTk9UIFZJUCIgZW5kDQogICAgZW5kDQogDQogICAgaWYgRS5Jc1JlYWR5KCkgdGhlbg0KICAgICAgICBpZiBIYXpNZW51LkNvbmRlbW4uc2V0dGluZ3NTdWJNZW51LlB1c2hBd2F5R2FwY2xvc2VycyB0aGVuDQogICAgICAgICAgICBpZiBub3Qgc3BlbGxFeHBpcmVkIGFuZCAoR2V0VGlja0NvdW50KCkgLSBpbmZvcm1hdGlvblRhYmxlLnNwZWxsQ2FzdGVkVGljaykgPD0gKGluZm9ybWF0aW9uVGFibGUuc3BlbGxSYW5nZS9pbmZvcm1hdGlvblRhYmxlLnNwZWxsU3BlZWQpKjEwMDAgdGhlbg0KICAgICAgICAgICAgICAgIGxvY2FsIHNwZWxsRGlyZWN0aW9uICAgICA9IChpbmZvcm1hdGlvblRhYmxlLnNwZWxsRW5kUG9zIC0gaW5mb3JtYXRpb25UYWJsZS5zcGVsbFN0YXJ0UG9zKTpub3JtYWxpemVkKCkNCiAgICAgICAgICAgICAgICBsb2NhbCBzcGVsbFN0YXJ0UG9zaXRpb24gPSBpbmZvcm1hdGlvblRhYmxlLnNwZWxsU3RhcnRQb3MgKyBzcGVsbERpcmVjdGlvbg0KICAgICAgICAgICAgICAgIGxvY2FsIHNwZWxsRW5kUG9zaXRpb24gICA9IGluZm9ybWF0aW9uVGFibGUuc3BlbGxTdGFydFBvcyArIHNwZWxsRGlyZWN0aW9uICogaW5mb3JtYXRpb25UYWJsZS5zcGVsbFJhbmdlDQogICAgICAgICAgICAgICAgbG9jYWwgaGVyb1Bvc2l0aW9uID0gUG9pbnQobXlIZXJvLngsIG15SGVyby56KQ0KIA0KICAgICAgICAgICAgICAgIGxvY2FsIGxpbmVTZWdtZW50ID0gTGluZVNlZ21lbnQoUG9pbnQoc3BlbGxTdGFydFBvc2l0aW9uLngsIHNwZWxsU3RhcnRQb3NpdGlvbi55KSwgUG9pbnQoc3BlbGxFbmRQb3NpdGlvbi54LCBzcGVsbEVuZFBvc2l0aW9uLnkpKQ0KICAgICAgICAgICAgICAgIC0tbGluZVNlZ21lbnQ6ZHJhdyhBUkdCKDI1NSwgMCwgMjU1LCAwKSwgNzApDQogDQogICAgICAgICAgICAgICAgaWYgbGluZVNlZ21lbnQ6ZGlzdGFuY2UoaGVyb1Bvc2l0aW9uKSA8PSAobm90IGluZm9ybWF0aW9uVGFibGUuc3BlbGxJc0FuRXhwZXRpb24gYW5kIDY1IG9yIDIwMCkgdGhlbg0KICAgICAgICAgICAgICAgICAgICBDYXN0U3BlbGwoX0UsIGluZm9ybWF0aW9uVGFibGUuc3BlbGxTb3VyY2UpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgc3BlbGxFeHBpcmVkID0gdHJ1ZQ0KICAgICAgICAgICAgICAgIGluZm9ybWF0aW9uVGFibGUgPSB7fQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KIA0KICAgICAgICBpZiBIYXpNZW51LkNvbmRlbW4uYXV0b0NvbmRlbW4gdGhlbg0KICAgICAgICAgICAgZm9yIGksIGVuZW15SGVybyBpbiBpcGFpcnMoZW5lbXlUYWJsZSkgZG8NCiAgICAgICAgICAgICAgICBpZiBub3QgSGF6TWVudS5Db25kZW1uLmNvbmRlbW5TdWJNZW51WyJkaXNhYmxlQ29uZGVtbiIuLmldIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgZW5lbXlIZXJvIH49IG5pbCBhbmQgZW5lbXlIZXJvLnZhbGlkIGFuZCBub3QgZW5lbXlIZXJvLmRlYWQgYW5kIGVuZW15SGVyby52aXNpYmxlIGFuZCBHZXREaXN0YW5jZShlbmVteUhlcm8pIDw9IDcxNSBhbmQgR2V0RGlzdGFuY2UoZW5lbXlIZXJvKSA+IDAgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZW5lbXlQb3NpdGlvbiA9IEhhek1lbnUuQ29uZGVtbi5zZXR0aW5nc1N1Yk1lbnUuc2hvb3RpbmdNb2RlIGFuZCBWSVBfVVNFUiBhbmQgdHA6R2V0UHJlZGljdGlvbihlbmVteUhlcm8pIG9yIGVuZW15SGVybw0KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgUHVzaFBvcyA9IGVuZW15UG9zaXRpb24gKyAoVmVjdG9yKGVuZW15UG9zaXRpb24pIC0gbXlIZXJvKTpub3JtYWxpemVkKCkqSGF6TWVudS5Db25kZW1uLnNldHRpbmdzU3ViTWVudS5wdXNoRGlzdGFuY2UNCiANCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGVuZW15SGVyby54ID4gMCBhbmQgZW5lbXlIZXJvLnogPiAwIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBjaGVja3MgPSBtYXRoLmNlaWwoKEhhek1lbnUuQ29uZGVtbi5zZXR0aW5nc1N1Yk1lbnUucHVzaERpc3RhbmNlKS82NSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBjaGVja0Rpc3RhbmNlID0gKEhhek1lbnUuQ29uZGVtbi5zZXR0aW5nc1N1Yk1lbnUucHVzaERpc3RhbmNlKS9jaGVja3MNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBJbnNpZGVUaGVXYWxsID0gZmFsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3Igaz0xLCBjaGVja3MsIDEgZG8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgY2hlY2tzUG9zID0gZW5lbXlQb3NpdGlvbiArIChWZWN0b3IoZW5lbXlQb3NpdGlvbikgLSBteUhlcm8pOm5vcm1hbGl6ZWQoKSooY2hlY2tEaXN0YW5jZSprKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBXYWxsQ29udGFpbnNQb3NpdGlvbiA9IElzV2FsbChEM0RYVkVDVE9SMyhjaGVja3NQb3MueCwgY2hlY2tzUG9zLnksIGNoZWNrc1Bvcy56KSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgV2FsbENvbnRhaW5zUG9zaXRpb24gdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSW5zaWRlVGhlV2FsbCA9IHRydWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZA0KIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIEluc2lkZVRoZVdhbGwgdGhlbiBDYXN0U3BlbGwoX0UsIGVuZW15SGVybykgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogDQogDQogICAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQNCg0KDQotLS0tLS0tLS0tLS0tLS0tLS0tU2V0IFByaW9yaXR5LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQpmdW5jdGlvbiBTZXRQcmlvcml0eSh0YWJsZSwgaGVybywgcHJpb3JpdHkpDQoJZm9yIGk9MSwgI3RhYmxlLCAxIGRvDQoJCWlmIGhlcm8uY2hhck5hbWU6ZmluZCh0YWJsZVtpXSkgfj0gbmlsIHRoZW4NCgkJCVRTX1NldEhlcm9Qcmlvcml0eShwcmlvcml0eSwgaGVyby5jaGFyTmFtZSkNCgkJZW5kDQoJZW5kDQplbmQNCiANCmZ1bmN0aW9uIGFycmFuZ2VQcmlvcml0eXMoKQ0KCQlmb3IgaSwgZW5lbXkgaW4gaXBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQoJCVNldFByaW9yaXR5KHByaW9yaXR5VGFibGUuQURfQ2FycnksIGVuZW15LCAxKQ0KCQlTZXRQcmlvcml0eShwcmlvcml0eVRhYmxlLkFQLAkgICBlbmVteSwgMikNCgkJU2V0UHJpb3JpdHkocHJpb3JpdHlUYWJsZS5TdXBwb3J0LCAgZW5lbXksIDMpDQoJCVNldFByaW9yaXR5KHByaW9yaXR5VGFibGUuQnJ1aXNlciwgIGVuZW15LCA0KQ0KCQlTZXRQcmlvcml0eShwcmlvcml0eVRhYmxlLlRhbmssCSBlbmVteSwgNSkNCgkJZW5kDQplbmQNCg0KZnVuY3Rpb24gYXJyYW5nZVByaW9yaXR5c1RUKCkNCiAgICAgICAgZm9yIGksIGVuZW15IGluIGlwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KCQlTZXRQcmlvcml0eShwcmlvcml0eVRhYmxlLkFEX0NhcnJ5LCBlbmVteSwgMSkNCgkJU2V0UHJpb3JpdHkocHJpb3JpdHlUYWJsZS5BUCwgICAgICAgZW5lbXksIDEpDQoJCVNldFByaW9yaXR5KHByaW9yaXR5VGFibGUuU3VwcG9ydCwgIGVuZW15LCAyKQ0KCQlTZXRQcmlvcml0eShwcmlvcml0eVRhYmxlLkJydWlzZXIsICBlbmVteSwgMikNCgkJU2V0UHJpb3JpdHkocHJpb3JpdHlUYWJsZS5UYW5rLCAgICAgZW5lbXksIDMpDQogICAgICAgIGVuZA0KZW5kDQoNCg0KDQpmdW5jdGlvbiBQcmlvcml0eU9uTG9hZCgpDQoJaWYgaGVyb01hbmFnZXIuaUNvdW50IDwgMTAgb3IgKFR3aXN0ZWRUcmVlbGluZSBhbmQgaGVyb01hbmFnZXIuaUNvdW50IDwgNikgdGhlbg0KCQlwcmludCgiPGI+PGZvbnQgY29sb3I9XCIjNjY5OUZGXCI+Q2xhcml0eSBBaHJpOjwvZm9udD48L2I+IDxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPlRvbyBmZXcgY2hhbXBpb25zIHRvIGFycmFuZ2UgcHJpb3JpdHkuPC9mb250PiIpDQoJZWxzZWlmIGhlcm9NYW5hZ2VyLmlDb3VudCA9PSA2IHRoZW4NCgkJYXJyYW5nZVByaW9yaXR5c1RUKCkNCiAgICBlbHNlDQoJCWFycmFuZ2VQcmlvcml0eXMoKQ0KCWVuZA0KZW5kDQoNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS10YXJnZXQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQpmdW5jdGlvbiBPblduZE1zZyhNc2csIEtleSkNCglpZiBNc2cgPT0gV01fTEJVVFRPTkRPV04gYW5kIEhhek1lbnUuQ29tYm8uZm9jdXMgdGhlbg0KCQlsb2NhbCBkaXN0ID0gMA0KCQlsb2NhbCBTZWxlY3R0YXJnZXQgPSBuaWwNCgkJZm9yIGksIGVuZW15IGluIGlwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KCQkJaWYgVmFsaWRUYXJnZXQoZW5lbXkpIHRoZW4NCgkJCQlpZiBHZXREaXN0YW5jZShlbmVteSwgbW91c2VQb3MpIDw9IGRpc3Qgb3IgU2VsZWN0dGFyZ2V0ID09IG5pbCB0aGVuDQoJCQkJCWRpc3QgPSBHZXREaXN0YW5jZShlbmVteSwgbW91c2VQb3MpDQoJCQkJCVNlbGVjdHRhcmdldCA9IGVuZW15DQoJCQkJZW5kDQoJCQllbmQNCgkJZW5kDQoJCWlmIFNlbGVjdHRhcmdldCBhbmQgZGlzdCA8IDMwMCB0aGVuDQoJCQlpZiBTZWxlY3RlZFRhcmdldCBhbmQgU2VsZWN0dGFyZ2V0LmNoYXJOYW1lID09IFNlbGVjdGVkVGFyZ2V0LmNoYXJOYW1lIHRoZW4NCgkJCQlTZWxlY3RlZFRhcmdldCA9IG5pbA0KCQkJCWlmIEhhek1lbnUuQ29tYm8uZm9jdXMgdGhlbiANCgkJCQkJUHJpbnRDaGF0KCJUYXJnZXQgZGVzZWxlY3RlZDogIi4uU2VsZWN0dGFyZ2V0LmNoYXJOYW1lKSANCgkJCQllbmQNCgkJCWVsc2UNCgkJCQlTZWxlY3RlZFRhcmdldCA9IFNlbGVjdHRhcmdldA0KCQkJCWlmIEhhek1lbnUuQ29tYm8uZm9jdXMgdGhlbg0KCQkJCQlQcmludENoYXQoIk5ldyB0YXJnZXQgc2VsZWN0ZWQ6ICIuLlNlbGVjdHRhcmdldC5jaGFyTmFtZSkgDQoJCQkJZW5kDQoJCQllbmQNCgkJZW5kDQoJZW5kDQplbmQNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQpmdW5jdGlvbiBHZXRIUEJhclBvcyhlbmVteSkNCgllbmVteS5iYXJEYXRhID0ge1BlcmNlbnRhZ2VPZmZzZXQgPSB7eCA9IC0wLjA1LCB5ID0gMH19LS1HZXRFbmVteUJhckRhdGEoKQ0KCWxvY2FsIGJhclBvcyA9IEdldFVuaXRIUEJhclBvcyhlbmVteSkNCglsb2NhbCBiYXJQb3NPZmZzZXQgPSBHZXRVbml0SFBCYXJPZmZzZXQoZW5lbXkpDQoJbG9jYWwgYmFyT2Zmc2V0ID0geyB4ID0gZW5lbXkuYmFyRGF0YS5QZXJjZW50YWdlT2Zmc2V0LngsIHkgPSBlbmVteS5iYXJEYXRhLlBlcmNlbnRhZ2VPZmZzZXQueSB9DQoJbG9jYWwgYmFyUG9zUGVyY2VudGFnZU9mZnNldCA9IHsgeCA9IGVuZW15LmJhckRhdGEuUGVyY2VudGFnZU9mZnNldC54LCB5ID0gZW5lbXkuYmFyRGF0YS5QZXJjZW50YWdlT2Zmc2V0LnkgfQ0KCWxvY2FsIEJhclBvc09mZnNldFggPSAxNzENCglsb2NhbCBCYXJQb3NPZmZzZXRZID0gNDYNCglsb2NhbCBDb3JyZWN0aW9uWSA9IDM5DQoJbG9jYWwgU3RhcnRIcFBvcyA9IDMxDQoJDQoJYmFyUG9zLnggPSBtYXRoLmZsb29yKGJhclBvcy54ICsgKGJhclBvc09mZnNldC54IC0gMC41ICsgYmFyUG9zUGVyY2VudGFnZU9mZnNldC54KSAqIEJhclBvc09mZnNldFggKyBTdGFydEhwUG9zKQ0KCWJhclBvcy55ID0gbWF0aC5mbG9vcihiYXJQb3MueSArIChiYXJQb3NPZmZzZXQueSAtIDAuNSArIGJhclBvc1BlcmNlbnRhZ2VPZmZzZXQueSkgKiBCYXJQb3NPZmZzZXRZICsgQ29ycmVjdGlvblkpDQoJCQkJCQkNCglsb2NhbCBTdGFydFBvcyA9IFZlY3RvcihiYXJQb3MueCAsIGJhclBvcy55LCAwKQ0KCWxvY2FsIEVuZFBvcyA9ICBWZWN0b3IoYmFyUG9zLnggKyAxMDggLCBiYXJQb3MueSAsIDApDQoJcmV0dXJuIFZlY3RvcihTdGFydFBvcy54LCBTdGFydFBvcy55LCAwKSwgVmVjdG9yKEVuZFBvcy54LCBFbmRQb3MueSwgMCkNCmVuZA0KDQpmdW5jdGlvbiB0cmFja2VyKCkNCglpZiBvcy5jbG9jaygpIC0gVGlja0xpbWl0ID4gMC4zIHRoZW4NCgkJVGlja0xpbWl0ID0gb3MuY2xvY2soKQ0KCQlmb3IgaT0xLCBoZXJvTWFuYWdlci5pQ291bnQsIDEgZG8NCgkJCWxvY2FsIGhlcm8gPSBoZXJvTWFuYWdlcjpnZXRIZXJvKGkpDQoJCQlpZiBWYWxpZFRhcmdldChoZXJvLCBtYXRoLmh1Z2UsIGZhbHNlKSBvciBWYWxpZFRhcmdldChoZXJvKSB0aGVuDQoJCQkJLS1bWwlVcGRhdGUgdGhlIGN1cnJlbnQgY29vbGRvd25zXV0NCgkJCQloZXJvID0gaGVyb01hbmFnZXI6Z2V0SGVybyhpKQ0KCQkJCWZvciBfLCBzcGVsbCBpbiBwYWlycyhUcmFja1NwZWxscykgZG8NCgkJCQkJaWYgU3BlbGxzRGF0YVtpXSA9PSBuaWwgdGhlbg0KCQkJCQkJU3BlbGxzRGF0YVtpXSA9IHt9DQoJCQkJCWVuZA0KCQkJCQlpZiBTcGVsbHNEYXRhW2ldW3NwZWxsXSA9PSBuaWwgdGhlbg0KCQkJCQkJU3BlbGxzRGF0YVtpXVtzcGVsbF0gPSB7Y3VycmVudENkPTAsIG1heENkID0gMCwgbGV2ZWw9MH0NCgkJCQkJZW5kDQoJCQkJCS0tW1sJR2V0IHRoZSBtYXhpbXVtIGNvb2xkb3ducyB0byBtYWtlIHRoZSBwcm9ncmVzcyAgYmFyXV0NCgkJCQkJbG9jYWwgdGhlc3BlbGwgPSBoZXJvOkdldFNwZWxsRGF0YShzcGVsbCkNCgkJCQkJbG9jYWwgY3VycmVudGNkDQoJCQkJCWlmIHRoZXNwZWxsIGFuZCB0aGVzcGVsbC5jdXJyZW50Q2QgdGhlbg0KCQkJCQkJY3VycmVudGNkID0gdGhlc3BlbGwuY3VycmVudENkDQoJCQkJCWVuZA0KCQkJCQlpZiBjdXJyZW50Y2QgYW5kIHRoZXNwZWxsIGFuZCB0aGVzcGVsbC5jdXJyZW50Q2QgdGhlbg0KCQkJCQkJU3BlbGxzRGF0YVtpXVtzcGVsbF0gPSB7DQoJCQkJCQkJY3VycmVudENkID0gbWF0aC5mbG9vcihjdXJyZW50Y2QpLA0KCQkJCQkJCW1heENkID0gbWF0aC5mbG9vcihjdXJyZW50Y2QpID4gU3BlbGxzRGF0YVtpXVtzcGVsbF0ubWF4Q2QgYW5kIG1hdGguZmxvb3IoY3VycmVudGNkKSBvciBTcGVsbHNEYXRhW2ldW3NwZWxsXS5tYXhDZCwNCgkJCQkJCQlsZXZlbCA9IHRoZXNwZWxsLmxldmVsDQoJCQkJCQl9DQoJCQkJCWVuZA0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KCUZpcnN0VGljayA9IHRydWUNCmVuZA0KDQpmdW5jdGlvbiBEcmF3UmVjdGFuZ2xlQUwoeCwgeSwgdywgaCwgY29sb3IpDQoJbG9jYWwgUG9pbnRzID0ge30NCglQb2ludHNbMV0gPSBEM0RYVkVDVE9SMihtYXRoLmZsb29yKHgpLCBtYXRoLmZsb29yKHkpKQ0KCVBvaW50c1syXSA9IEQzRFhWRUNUT1IyKG1hdGguZmxvb3IoeCArIHcpLCBtYXRoLmZsb29yKHkpKQ0KCURyYXdMaW5lczIoUG9pbnRzLCBtYXRoLmZsb29yKGgpLCBjb2xvcikNCmVuZA0KDQoNCg0KZnVuY3Rpb24gQ0REcmF3cygpDQogICBpZiAoSGF6TWVudS5Db29sRG93bnMuRW5hYmxlZCBvciBIYXpNZW51LkNvb2xEb3ducy5FbmFibGVkMiBvciBJc0tleURvd24oMTYpKSBhbmQgRmlyc3RUaWNrIGFuZCAoSGF6TWVudS5Db29sRG93bnMuRHJhd2luZy5BbHdheXMgb3IgSGF6TWVudS5Db29sRG93bnMuRHJhd2luZy5EcmF3S2V5KSB0aGVuDQoJCWZvciBpPTEsIGhlcm9NYW5hZ2VyLmlDb3VudCwgMSBkbw0KCQkJbG9jYWwgaGVybyA9IGhlcm9NYW5hZ2VyOmdldEhlcm8oaSkNCgkJCWlmICgoVmFsaWRUYXJnZXQoaGVybywgbWF0aC5odWdlLGZhbHNlKSAgYW5kIChIYXpNZW51LkNvb2xEb3ducy5FbmFibGVkMiBvciBJc0tleURvd24oMTYpKSkgb3IgKFZhbGlkVGFyZ2V0KGhlcm8pIGFuZCAoSGF6TWVudS5Db29sRG93bnMuRW5hYmxlZCBvciBJc0tleURvd24oMTYpKSkpIGFuZCBub3QgaGVyby5pc01lIHRoZW4NCgkJCQlsb2NhbCBiYXJwb3MgPSBHZXRIUEJhclBvcyhoZXJvKQ0KCQkJCWlmIE9uU2NyZWVuKGJhcnBvcy54LCBiYXJwb3MueSkgYW5kIChTcGVsbHNEYXRhW2ldIH49IG5pbCkgdGhlbg0KCQkJCQlsb2NhbCBwb3MgPSBWZWN0b3IoYmFycG9zLngsIGJhcnBvcy55LCAwKQ0KCQkJCQlsb2NhbCBDRGNvbG9yID0gQVJHQihIYXpNZW51LkNvb2xEb3ducy5Db2xvcnMuY2Rjb2xvclsxXSwgSGF6TWVudS5Db29sRG93bnMuQ29sb3JzLmNkY29sb3JbMl0sSGF6TWVudS5Db29sRG93bnMuQ29sb3JzLmNkY29sb3JbM10sSGF6TWVudS5Db29sRG93bnMuQ29sb3JzLmNkY29sb3JbNF0pDQoJCQkJCWxvY2FsIFJlYWR5Y29sb3IgPSBBUkdCKEhhek1lbnUuQ29vbERvd25zLkNvbG9ycy5yZWFkeWNvbG9yWzFdLEhhek1lbnUuQ29vbERvd25zLkNvbG9ycy5yZWFkeWNvbG9yWzJdLEhhek1lbnUuQ29vbERvd25zLkNvbG9ycy5yZWFkeWNvbG9yWzNdLEhhek1lbnUuQ29vbERvd25zLkNvbG9ycy5yZWFkeWNvbG9yWzRdKQ0KCQkJCQlsb2NhbCBUZXh0Y29sb3IgPSBBUkdCKEhhek1lbnUuQ29vbERvd25zLkNvbG9ycy50ZXh0Y29sb3JbMV0sSGF6TWVudS5Db29sRG93bnMuQ29sb3JzLnRleHRjb2xvclsyXSxIYXpNZW51LkNvb2xEb3ducy5Db2xvcnMudGV4dGNvbG9yWzNdLEhhek1lbnUuQ29vbERvd25zLkNvbG9ycy50ZXh0Y29sb3JbNF0gKQ0KCQkJCQlsb2NhbCBCYWNrZ3JvdW5kY29sb3IgPSBBUkdCKEhhek1lbnUuQ29vbERvd25zLkNvbG9ycy5iYWNrZ3JvdW5kY29sb3JbMV0sSGF6TWVudS5Db29sRG93bnMuQ29sb3JzLmJhY2tncm91bmRjb2xvclsyXSxIYXpNZW51LkNvb2xEb3ducy5Db2xvcnMuYmFja2dyb3VuZGNvbG9yWzNdLEhhek1lbnUuQ29vbERvd25zLkNvbG9ycy5iYWNrZ3JvdW5kY29sb3JbNF0pDQoJCQkJCWxvY2FsIHdpZHRoID0gSGF6TWVudS5Db29sRG93bnMuQXBwZWFyYW5jZS53aWR0aA0KCQkJCQlsb2NhbCBoZWlnaHQgPSBIYXpNZW51LkNvb2xEb3ducy5BcHBlYXJhbmNlLmhlaWdodA0KCQkJCQlsb2NhbCBzZXAgPSAyDQoJCQkJCS0tW1tGaXJzdCA0IHNwZWxsc11dDQoJCQkJCWlmIEhhek1lbnUuQ29vbERvd25zLkFwcGVhcmFuY2Uuc2hvd2ggdGhlbg0KCQkJCQkJcG9zLnkgPSAgcG9zLnkgKyBIYXpNZW51LkNvb2xEb3ducy5BcHBlYXJhbmNlLnZwb3NpdGlvbg0KCQkJCQkJZm9yIGosIFNwZWxscyBpbiBpcGFpcnMgKFRyYWNrU3BlbGxzKSBkbw0KCQkJCQkJCWxvY2FsIGN1cnJlbnRjZCA9IFNwZWxsc0RhdGFbaV1bU3BlbGxzXS5jdXJyZW50Q2QNCgkJCQkJCQlsb2NhbCBtYXhjZCA9IFNwZWxsc0RhdGFbaV1bU3BlbGxzXS5tYXhDZA0KCQkJCQkJCWxvY2FsIGxldmVsID0gU3BlbGxzRGF0YVtpXVtTcGVsbHNdLmxldmVsDQoJCQkJCQkJDQoJCQkJCQkJaWYgaiA+IDQgdGhlbg0KCQkJCQkJCQlDRGNvbG9yID0gQVJHQihIYXpNZW51LkNvb2xEb3ducy5Db2xvcnMuU1NwZWxsc1siVGhlUmVzdCJdWzFdLCBIYXpNZW51LkNvb2xEb3ducy5Db2xvcnMuU1NwZWxsc1siVGhlUmVzdCJdWzJdLCBIYXpNZW51LkNvb2xEb3ducy5Db2xvcnMuU1NwZWxsc1siVGhlUmVzdCJdWzNdLCBIYXpNZW51LkNvb2xEb3ducy5Db2xvcnMuU1NwZWxsc1siVGhlUmVzdCJdWzRdKQ0KCQkJCQkJCQlmb3IgXywgc3BlbGwgaW4gaXBhaXJzKFNTcGVsbHMpIGRvDQoJCQkJCQkJCQlpZiAoSGF6TWVudS5Db29sRG93bnMuQ29sb3JzLlNTcGVsbHNbc3BlbGwuTmFtZV0gfj0gbmlsKSBhbmQgKGhlcm86R2V0U3BlbGxEYXRhKGogPT0gNSBhbmQgU1VNTU9ORVJfMSBvciBTVU1NT05FUl8yKS5uYW1lID09IHNwZWxsLk5hbWUpIHRoZW4NCgkJCQkJCQkJCQlDRGNvbG9yID0gQVJHQihIYXpNZW51LkNvb2xEb3ducy5Db2xvcnMuU1NwZWxsc1tzcGVsbC5OYW1lXVsxXSwgSGF6TWVudS5Db29sRG93bnMuQ29sb3JzLlNTcGVsbHNbc3BlbGwuTmFtZV1bMl0sIEhhek1lbnUuQ29vbERvd25zLkNvbG9ycy5TU3BlbGxzW3NwZWxsLk5hbWVdWzNdLCBIYXpNZW51LkNvb2xEb3ducy5Db2xvcnMuU1NwZWxsc1tzcGVsbC5OYW1lXVs0XSkNCgkJCQkJCQkJCWVuZA0KCQkJCQkJCQllbmQNCgkJCQkJCQkJUmVhZHljb2xvciA9IENEY29sb3INCgkJCQkJCQllbHNlDQoJCQkJCQkJCUNEY29sb3IgPSBBUkdCKEhhek1lbnUuQ29vbERvd25zLkNvbG9ycy5jZGNvbG9yWzFdLCBIYXpNZW51LkNvb2xEb3ducy5Db2xvcnMuY2Rjb2xvclsyXSxIYXpNZW51LkNvb2xEb3ducy5Db2xvcnMuY2Rjb2xvclszXSxIYXpNZW51LkNvb2xEb3ducy5Db2xvcnMuY2Rjb2xvcls0XSkNCgkJCQkJCQkJUmVhZHljb2xvciA9IEFSR0IoSGF6TWVudS5Db29sRG93bnMuQ29sb3JzLnJlYWR5Y29sb3JbMV0sSGF6TWVudS5Db29sRG93bnMuQ29sb3JzLnJlYWR5Y29sb3JbMl0sSGF6TWVudS5Db29sRG93bnMuQ29sb3JzLnJlYWR5Y29sb3JbM10sSGF6TWVudS5Db29sRG93bnMuQ29sb3JzLnJlYWR5Y29sb3JbNF0pDQoJCQkJCQkJZW5kDQoJCQkJCQkNCgkJCQkJCQlEcmF3UmVjdGFuZ2xlQUwocG9zLngtMSwgcG9zLnktMSwgd2lkdGggKyBzZXAgLCBoZWlnaHQrNCwgQmFja2dyb3VuZGNvbG9yKQ0KCQkJCQkJDQoJCQkJCQkJaWYgKGN1cnJlbnRjZCB+PSAwKSB0aGVuDQoJCQkJCQkJCURyYXdSZWN0YW5nbGVBTChwb3MueCwgcG9zLnksIHdpZHRoIC0gbWF0aC5mbG9vcih3aWR0aCAqIGN1cnJlbnRjZCkgLyBtYXhjZCwgaGVpZ2h0LCBDRGNvbG9yKQ0KCQkJCQkJCWVsc2UNCgkJCQkJCQkJRHJhd1JlY3RhbmdsZUFMKHBvcy54LCBwb3MueSwgd2lkdGgsIGhlaWdodCwgUmVhZHljb2xvcikNCgkJCQkJCQllbmQNCgkJCQkJCQ0KCQkJCQkJCWlmIChjdXJyZW50Y2Qgfj0gMCkgYW5kIChjdXJyZW50Y2QgPCAxMDApIHRoZW4NCgkJCQkJCQkJRHJhd1RleHQodG9zdHJpbmcoY3VycmVudGNkKSxIYXpNZW51LkNvb2xEb3ducy5BcHBlYXJhbmNlLnRleHRzaXplLCBwb3MueCs2LCBwb3MueSs0LCBBUkdCKDI1NSwgMCwgMCwgMCkpDQoJCQkJCQkJCURyYXdUZXh0KHRvc3RyaW5nKGN1cnJlbnRjZCksSGF6TWVudS5Db29sRG93bnMuQXBwZWFyYW5jZS50ZXh0c2l6ZSwgcG9zLngrOCwgcG9zLnkrNiwgQVJHQigyNTUsIDAsIDAsIDApKQ0KCQkJCQkJCQlEcmF3VGV4dCh0b3N0cmluZyhjdXJyZW50Y2QpLEhhek1lbnUuQ29vbERvd25zLkFwcGVhcmFuY2UudGV4dHNpemUsIHBvcy54KzcsIHBvcy55KzUsIFRleHRjb2xvcikNCgkJCQkJCQllbHNlaWYgSXNLZXlEb3duKDE2KSB0aGVuDQoJCQkJCQkJCURyYXdUZXh0KHRvc3RyaW5nKGxldmVsKSxIYXpNZW51LkNvb2xEb3ducy5BcHBlYXJhbmNlLnRleHRzaXplLCBwb3MueCs2LCBwb3MueSs0LCBBUkdCKDI1NSwgMCwgMCwgMCkpDQoJCQkJCQkJCURyYXdUZXh0KHRvc3RyaW5nKGxldmVsKSxIYXpNZW51LkNvb2xEb3ducy5BcHBlYXJhbmNlLnRleHRzaXplLCBwb3MueCs4LCBwb3MueSs2LCBBUkdCKDI1NSwgMCwgMCwgMCkpDQoJCQkJCQkJCURyYXdUZXh0KHRvc3RyaW5nKGxldmVsKSxIYXpNZW51LkNvb2xEb3ducy5BcHBlYXJhbmNlLnRleHRzaXplLCBwb3MueCs3LCBwb3MueSs1LCBUZXh0Y29sb3IpDQoJCQkJCQkJZW5kDQoNCgkJCQkJCQlwb3MueCA9IHBvcy54ICsgd2lkdGggKyBzZXANCgkJCQkJCQlpZiBqID09IEhhek1lbnUuQ29vbERvd25zLkFwcGVhcmFuY2UubiB0aGVuIGJyZWFrIGVuZA0KCQkJCQkJZW5kDQoJCQkJCWVuZA0KCQkJCQlwb3MueCA9IGJhcnBvcy54ICsgMjUqNSszICsgMio0DQoJCQkJCXBvcy55ID0gYmFycG9zLnkgLSA4DQoJCQkJCS0tW1tMYXN0IDIgc3BlbGxzXV0NCgkJCQkJaWYgSGF6TWVudS5Db29sRG93bnMuQXBwZWFyYW5jZS5zaG93diB0aGVuDQoJCQkJCQlmb3IgaiwgU3BlbGxzIGluIGlwYWlycyAoVHJhY2tTcGVsbHMpIGRvDQoJCQkJCQkJbG9jYWwgY3VycmVudGNkID0gU3BlbGxzRGF0YVtpXVtTcGVsbHNdLmN1cnJlbnRDZA0KCQkJCQkJCWxvY2FsIG1heGNkID0gU3BlbGxzRGF0YVtpXVtTcGVsbHNdLm1heENkDQoJCQkJCQkJbG9jYWwgd2lkdGgyID0gSGF6TWVudS5Db29sRG93bnMuQXBwZWFyYW5jZS53aWR0aDINCgkJCQkJCQlpZiBqID4gNCB0aGVuDQoJCQkJCQkJCUNEY29sb3IgPSBBUkdCKEhhek1lbnUuQ29vbERvd25zLkNvbG9ycy5TU3BlbGxzWyJUaGVSZXN0Il1bMV0sIEhhek1lbnUuQ29vbERvd25zLkNvbG9ycy5TU3BlbGxzWyJUaGVSZXN0Il1bMl0sIEhhek1lbnUuQ29vbERvd25zLkNvbG9ycy5TU3BlbGxzWyJUaGVSZXN0Il1bM10sIEhhek1lbnUuQ29vbERvd25zLkNvbG9ycy5TU3BlbGxzWyJUaGVSZXN0Il1bNF0pDQoJCQkJCQkJCWZvciBfLCBzcGVsbCBpbiBpcGFpcnMoU1NwZWxscykgZG8NCgkJCQkJCQkJCWlmIChIYXpNZW51LkNvb2xEb3ducy5Db2xvcnMuU1NwZWxsc1tzcGVsbC5OYW1lXSB+PSBuaWwpIGFuZCAoaGVybzpHZXRTcGVsbERhdGEoaiA9PSA1IGFuZCBTVU1NT05FUl8xIG9yIFNVTU1PTkVSXzIpLm5hbWUgPT0gc3BlbGwuTmFtZSkgdGhlbg0KCQkJCQkJCQkJCUNEY29sb3IgPSBBUkdCKEhhek1lbnUuQ29vbERvd25zLkNvbG9ycy5TU3BlbGxzW3NwZWxsLk5hbWVdWzFdLCBIYXpNZW51LkNvb2xEb3ducy5Db2xvcnMuU1NwZWxsc1tzcGVsbC5OYW1lXVsyXSwgSGF6TWVudS5Db29sRG93bnMuQ29sb3JzLlNTcGVsbHNbc3BlbGwuTmFtZV1bM10sIEhhek1lbnUuQ29vbERvd25zLkNvbG9ycy5TU3BlbGxzW3NwZWxsLk5hbWVdWzRdKQ0KCQkJCQkJCQkJZW5kDQoJCQkJCQkJCWVuZA0KCQkJCQkJCQlEcmF3UmVjdGFuZ2xlQUwocG9zLngsIHBvcy55LHdpZHRoMisyLDExLEJhY2tncm91bmRjb2xvcikNCgkJCQkJCQkJaWYgY3VycmVudGNkIH49IDAgdGhlbg0KCQkJCQkJCQkJRHJhd1JlY3RhbmdsZUFMKHBvcy54KzEsIHBvcy55KzEsIHdpZHRoMiAtIHdpZHRoMiAqIGN1cnJlbnRjZCAvIG1heGNkLDksQ0Rjb2xvcikNCgkJCQkJCQkJDQoJCQkJCQkJCWVsc2UNCgkJCQkJCQkJCURyYXdSZWN0YW5nbGVBTChwb3MueCsxLCBwb3MueSsxLCB3aWR0aDIsIDksIENEY29sb3IpDQoJCQkJCQkJCWVuZA0KCQkJCQkJCQlpZiAoY3VycmVudGNkIH49IDApIGFuZCAoY3VycmVudGNkIDwgMTAwKSB0aGVuDQoJCQkJCQkJCQlEcmF3VGV4dCh0b3N0cmluZyhjdXJyZW50Y2QpLEhhek1lbnUuQ29vbERvd25zLkFwcGVhcmFuY2UudGV4dHNpemUsIHBvcy54LTEsIHBvcy55LTEsIEFSR0IoMjU1LCAwLCAwLCAwKSkNCgkJCQkJCQkJCURyYXdUZXh0KHRvc3RyaW5nKGN1cnJlbnRjZCksSGF6TWVudS5Db29sRG93bnMuQXBwZWFyYW5jZS50ZXh0c2l6ZSwgcG9zLngrMSwgcG9zLnkrMSwgQVJHQigyNTUsIDAsIDAsIDApKQ0KCQkJCQkJCQkJRHJhd1RleHQodG9zdHJpbmcoY3VycmVudGNkKSxIYXpNZW51LkNvb2xEb3ducy5BcHBlYXJhbmNlLnRleHRzaXplLCBwb3MueCwgcG9zLnksIFRleHRjb2xvcikNCgkJCQkJCQkJZW5kDQoJCQkJCQkJCVJlYWR5Y29sb3IgPSBDRGNvbG9yDQoJCQkJCQkJCXBvcy55ID0gcG9zLnkgLSAxMg0KCQkJCQkJCWVuZA0KCQkJCQkJZW5kDQoJCQkJCWVuZA0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KZW5kDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLUxvd0F3YXJuZXNzLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KDQpmdW5jdGlvbiB0dXJyZXRzKCkNCiBpZiBHZXRHYW1lKCkuaXNPdmVyIHRoZW4gcmV0dXJuIGVuZA0KICAgICAgICBmb3IgaSwgdHVycmV0IGluIHBhaXJzKGRyYXdUdXJyZXRzKSBkbw0KICAgICAgICAgICAgRHJhd0NpcmNsZSh0dXJyZXQueCwgdHVycmV0LnksIHR1cnJldC56LCB0dXJyZXQucmFuZ2UsIHR1cnJldC5jb2xvcikNCiAgICAgICAgICAgIGlmIEhhek1lbnUuRHJhdy5Ub3dlclIuc2hvd1Zpc2liaWxpdHkgdGhlbg0KICAgICAgICAgICAgICAgIERyYXdDaXJjbGUodHVycmV0LngsIHR1cnJldC55LCB0dXJyZXQueiwgdHVycmV0LnZpc2liaWxpdHlSYW5nZSwgdmlzaWJpbGl0eVR1cnJldENvbG9yKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KZW5kDQoNCmZ1bmN0aW9uIHR1cnJldHJhbmdlcygpDQogICAgICAgZHJhd1R1cnJldHMgPSB7fQ0KICAgICAgICBmb3IgbmFtZSwgdHVycmV0IGluIHBhaXJzKEdldFR1cnJldHMoKSkgZG8NCiAgICAgICAgICAgICAgICBpZiB0dXJyZXQgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGVuZW15VHVycmV0ID0gdHVycmV0LnRlYW0gfj0gcGxheWVyLnRlYW0NCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChIYXpNZW51LkRyYXcuVG93ZXJSLnNob3dBbGx5IG9yIGVuZW15VHVycmV0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmQgKEhhek1lbnUuRHJhdy5Ub3dlclIub25seUNsb3NlID09IGZhbHNlIG9yIEdldERpc3RhbmNlKHR1cnJldCkgPCAyMDAwKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGRyYXdUdXJyZXRzLCB7eCA9IHR1cnJldC54LCB5ID0gdHVycmV0LnksIHogPSB0dXJyZXQueiwgcmFuZ2UgPSB0dXJyZXQucmFuZ2UsIGNvbG9yID0gKGVuZW15VHVycmV0IGFuZCBlbmVteVR1cnJldENvbG9yIG9yIGFsbHlUdXJyZXRDb2xvciksIHZpc2liaWxpdHlSYW5nZSA9IHR1cnJldC52aXNpYmlsaXR5UmFuZ2V9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KZW5kDQoNCgkJDQoJCQ0KZnVuY3Rpb24gYXdhcm5lc3MoKQ0KICAgIGlmIEhhek1lbnUuRHJhdy5hd2FybmVzcy5HYW5rIHRoZW4NCiAgICAgICAgZm9yIGksIEVuZW15IGluIHBhaXJzKEVuZW15VGFibGUpIGRvDQogICAgICAgICAgICBpZiBub3QgRHJhd2VkW2ldIGFuZCBvcy5jbG9jaygpID4gVGltZU1pc3NpbmdbaV0NCiAgICAgICAgICAgICAgICAgICAgICAgIGFuZCBvcy5jbG9jaygpIDwgU3VycHJpemVUaW1lW2ldIGFuZCBub3QgRW5lbXlEZWFkW2ldDQogICAgICAgICAgICAgICAgICAgICAgICBhbmQgRW5lbXlWaXNpYmxlW2ldIGFuZCBEaXN0YW5jZVRvRW5lbXlbaV0gPCAyNTAwIHRoZW4NCiAgICAgICAgICAgICAgICBMYXN0RHJhd1tpXSA9IG9zLmNsb2NrKCkgKyA1DQogICAgICAgICAgICAgICAgRHJhd2VkW2ldID0gdHJ1ZQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBEcmF3ZWRbaV0gYW5kIG9zLmNsb2NrKCkgPiBUaW1lTWlzc2luZ1tpXQ0KICAgICAgICAgICAgICAgICAgICAgICAgYW5kIG9zLmNsb2NrKCkgPCBTdXJwcml6ZVRpbWVbaV0gYW5kIG5vdCBFbmVteURlYWRbaV0NCiAgICAgICAgICAgICAgICAgICAgICAgIGFuZCBFbmVteVZpc2libGVbaV0gYW5kIERpc3RhbmNlVG9FbmVteVtpXSA8IDI1MDAgdGhlbg0KICAgICAgICAgICAgICAgIGlmIG9zLmNsb2NrKCkgPCBMYXN0RHJhd1tpXSB0aGVuDQogICAgICAgICAgICAgICAgICAgIERyYXdDaXJjbGUoRW5lbXkueCwgRW5lbXkueSwgRW5lbXkueiwgMTUwMCwgMHhEQzE0M0MpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQNCg0KZnVuY3Rpb24gZ2Fua2FsZXJ0ZXIoKQ0KICAgICBpZiBIYXpNZW51LkRyYXcuYXdhcm5lc3MuR2FuayB0aGVuDQogICAgICAgIGZvciBpLCBFbmVteSBpbiBwYWlycyhFbmVteVRhYmxlKSBkbw0KICAgICAgICAgICAgRW5lbXlEZWFkW2ldID0gRW5lbXkuZGVhZA0KICAgICAgICAgICAgRW5lbXlWaXNpYmxlW2ldID0gRW5lbXkudmlzaWJsZQ0KICAgICAgICAgICAgaWYgRW5lbXlWaXNpYmxlW2ldIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBub3QgQXBwZWFyZWRbaV0gdGhlbg0KICAgICAgICAgICAgICAgICAgICBTdXJwcml6ZVRpbWVbaV0gPSBvcy5jbG9jaygpICsgNg0KICAgICAgICAgICAgICAgICAgICBBcHBlYXJlZFtpXSA9IHRydWUNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBEaXNzYXBlYXJlZFtpXSA9IGZhbHNlDQogICAgICAgICAgICAgICAgRGlzdGFuY2VUb0VuZW15W2ldID0gbXlIZXJvOkdldERpc3RhbmNlKEVuZW15KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBpZiBFbmVteVZpc2libGVbaV0gPT0gZmFsc2UgdGhlbg0KICAgICAgICAgICAgICAgIGlmIG5vdCBEaXNzYXBlYXJlZFtpXSB0aGVuDQogICAgICAgICAgICAgICAgICAgIFRpbWVNaXNzaW5nW2ldID0gb3MuY2xvY2soKSArIDYNCiAgICAgICAgICAgICAgICAgICAgRGlzc2FwZWFyZWRbaV0gPSB0cnVlDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgRHJhd2VkW2ldID0gZmFsc2UNCiAgICAgICAgICAgICAgICBBcHBlYXJlZFtpXSA9IGZhbHNlDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQNCgkJDQoNCmxvY2FsIF9hbGx5SGVyb2VzDQpmdW5jdGlvbiBHZXRBbGx5SGVyb2VzKCkNCiAgICBpZiBfYWxseUhlcm9lcyB0aGVuIHJldHVybiBfYWxseUhlcm9lcyBlbmQNCiAgICBfYWxseUhlcm9lcyA9IHt9DQogICAgZm9yIGkgPSAxLCBoZXJvTWFuYWdlci5pQ291bnQgZG8NCiAgICAgICAgbG9jYWwgaGVybyA9IGhlcm9NYW5hZ2VyOkdldEhlcm8oaSkNCiAgICAgICAgaWYgaGVyby50ZWFtID09IG15SGVyby50ZWFtIHRoZW4NCiAgICAgICAgICAgIHRhYmxlLmluc2VydChfYWxseUhlcm9lcywgaGVybykNCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgcmV0dXJuIHNldG1ldGF0YWJsZShfYWxseUhlcm9lcyx7DQogICAgICAgIF9fbmV3aW5kZXggPSBmdW5jdGlvbihzZWxmLCBrZXksIHZhbHVlKQ0KICAgICAgICAgICAgZXJyb3IoIkFkZGluZyB0byBBbGx5SGVyb2VzIGlzIG5vdCBncmFudGVkLiBVc2UgdGFibGUuY29weS4iKQ0KICAgICAgICBlbmQsDQogICAgfSkNCmVuZA0KDQpmdW5jdGlvbiBUcmlnZ2VyVHJhcCgpDQogIGZvciBJRCwgd2FyZCBpbiBwYWlycyhwbGFjZWRXYXJkcykgZG8NCiAgICBmb3IgaSA9IDEsIGhlcm9NYW5hZ2VyLmlDb3VudCBkbw0KICAgICAgbG9jYWwgaGVybyA9IGhlcm9NYW5hZ2VyOkdldEhlcm8oaSkNCg0KICAgICAgaWYgd2FyZC50cmFwIGFuZCB3YXJkLnRlYW0gfj0gaGVyby50ZWFtIGFuZCBHZXREaXN0YW5jZSh3YXJkLCBoZXJvKSA8PSB3YXJkLnRyaWdnZXJSYW5nZSB0aGVuDQogICAgICAgIHBsYWNlZFdhcmRzW0lEXSA9IG5pbA0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KDQogIERlbGF5QWN0aW9uKFRyaWdnZXJUcmFwLCAwLjIpDQplbmQNCg0KDQpmdW5jdGlvbiB3YXJkcygpDQogICBsb2NhbCBQaW5nV2FyZHMgPSBIYXpNZW51LkRyYXcuV2FyZHMuUGluZ1dhcmRzDQogIGxvY2FsIFBpbmdlZCA9IGZhbHNlDQoNCglmb3IgSUQsIHdhcmQgaW4gcGFpcnMocGxhY2VkV2FyZHMpIGRvDQoJCWlmIChHZXRUaWNrQ291bnQoKSAtIHdhcmQuc3Bhd25UaW1lKSA+IHdhcmQuZHVyYXRpb24gKyA1MDAwIG9yICh3YXJkLm9iamVjdCBhbmQgd2FyZC5vYmplY3QuaGVhbHRoID09IDApIHRoZW4NCgkJCXBsYWNlZFdhcmRzW0lEXSA9IG5pbA0KCQllbHNlaWYgKHdhcmQudGVhbSA9PSBURUFNX0VORU1ZIG9yIEhhek1lbnUuRHJhdy5XYXJkcy5Pd25UZWFtKSBhbmQgKHdhcmQuZHVyYXRpb24gPCBtYXRoLmh1Z2Ugb3IgSGF6TWVudS5EcmF3LldhcmRzLlNob3dQaW5rcykgYW5kIChub3Qgd2FyZC50cmFwIG9yIEhhek1lbnUuRHJhdy5XYXJkcy5TaG93VHJhcHMpIHRoZW4NCiAgICAgIGlmIFBpbmdXYXJkcyBhbmQgR2V0RGlzdGFuY2Uod2FyZCwgbW91c2VQb3MpIDw9IDE1MDAgYW5kICh3YXJkLmxhc3RQaW5nID09IG5pbCBvciBHZXRHYW1lVGltZXIoKSAtIHdhcmQubGFzdFBpbmcgPiAyMCkgdGhlbg0KICAgICAgICBQaW5nU2lnbmFsKDAsIHdhcmQueCwgd2FyZC55LCB3YXJkLnosIFBJTkdfRkFMTEJBQ0spDQoNCiAgICAgICAgd2FyZC5sYXN0UGluZyA9IEdldEdhbWVUaW1lcigpDQogICAgICAgIFBpbmdlZCA9IHRydWUNCiAgICAgIGVuZA0KDQoJCQlsb2NhbCBtaW5pbWFwUG9zaXRpb24gPSBHZXRNaW5pbWFwKHdhcmQpDQoJCQlEcmF3VGV4dFdpdGhCb3JkZXIoJy4nLCA2MCwgbWluaW1hcFBvc2l0aW9uLnggLSAzLCBtaW5pbWFwUG9zaXRpb24ueSAtIDQzLCB3YXJkLmNvbG9yLCBibGFja0NvbG9yKQ0KDQoJCQlsb2NhbCB4LCB5LCBvblNjcmVlbiA9IGdldDJERnJvbTNEKHdhcmQueCwgd2FyZC55LCB3YXJkLnopDQoJCQlEcmF3VGV4dFdpdGhCb3JkZXIoVGltZXJUZXh0KCh3YXJkLmR1cmF0aW9uIC0gKEdldFRpY2tDb3VudCgpIC0gd2FyZC5zcGF3blRpbWUpKSAvIDEwMDApLCAyMCwgeCAtIDE1LCB5IC0gMTEsIHdhcmQuY29sb3IsIGJsYWNrQ29sb3IpDQogICAgICBpZiB3YXJkWyJjcmVhdG9yIl0gdGhlbiBEcmF3VGV4dFdpdGhCb3JkZXIod2FyZFsiY3JlYXRvciJdLmNoYXJOYW1lLCAxNiwgeCAtIDIwLCB5ICsgMTAsIHdoaXRlQ29sb3IsIGJsYWNrQ29sb3IpIGVuZA0KDQoJCQlEcmF3Q2lyY2xlMih3YXJkLngsIHdhcmQueSwgd2FyZC56LCA5MCwgd2FyZC5jb2xvcikNCgkJCWlmIElzS2V5RG93bigxNikgdGhlbg0KCQkJCURyYXdDaXJjbGUyKHdhcmQueCwgd2FyZC55LCB3YXJkLnosIHdhcmQudmlzaW9uUmFuZ2UsIHdhcmQuY29sb3IpDQoJCQllbmQNCg0KCQllbmQNCgllbmQNCg0KICBpZiBQaW5nZWQgdGhlbiBTZW5kQ2hhdCgnd2FyZHMgdGhlcmUnKSBlbmQNCmVuZAkNCgkJDQpmdW5jdGlvbiBEcmF3VGV4dFdpdGhCb3JkZXIodGV4dFRvRHJhdywgdGV4dFNpemUsIHgsIHksIHRleHRDb2xvciwgYmFja2dyb3VuZENvbG9yKQ0KCURyYXdUZXh0KHRleHRUb0RyYXcsIHRleHRTaXplLCB4ICsgMSwgeSwgYmFja2dyb3VuZENvbG9yKQ0KCURyYXdUZXh0KHRleHRUb0RyYXcsIHRleHRTaXplLCB4IC0gMSwgeSwgYmFja2dyb3VuZENvbG9yKQ0KCURyYXdUZXh0KHRleHRUb0RyYXcsIHRleHRTaXplLCB4LCB5IC0gMSwgYmFja2dyb3VuZENvbG9yKQ0KCURyYXdUZXh0KHRleHRUb0RyYXcsIHRleHRTaXplLCB4LCB5ICsgMSwgYmFja2dyb3VuZENvbG9yKQ0KCURyYXdUZXh0KHRleHRUb0RyYXcsIHRleHRTaXplLCB4ICwgeSwgdGV4dENvbG9yKQ0KZW5kCQ0KDQoNCmZ1bmN0aW9uIGdldDJERnJvbTNEKHgsIHksIHopDQogICAgbG9jYWwgcG9zID0gV29ybGRUb1NjcmVlbihEM0RYVkVDVE9SMyh4LCB5LCB6KSkNCiAgICByZXR1cm4gcG9zLngsIHBvcy55LCBPblNjcmVlbihwb3MueCwgcG9zLnkpDQplbmQNCg0KDQpmdW5jdGlvbiBGaW5kT2JqQXQoeCwgeSwgeiwgZGlzdGFuY2UsIHRpbWVkaWZmLCB0aW1lc3RhcnQpDQogIGlmIG5vdCBkaXN0YW5jZSB0aGVuIGRpc3RhbmNlID0gMSBlbmQNCiAgaWYgbm90IHRpbWVkaWZmIHRoZW4gdGltZWRpZmYgPSBtYXRoLmh1Z2UgZW5kDQogIGlmIG5vdCB0aW1lc3RhcnQgdGhlbiB0aW1lc3RhcnQgPSBHZXRUaWNrQ291bnQoKSBlbmQNCg0KICBmb3IgbmV0d29ya0lELCB3YXJkIGluIHBhaXJzKHBsYWNlZFdhcmRzKSBkbw0KICAgIGlmIEdldERpc3RhbmNlKHdhcmQsIFZlY3Rvcih4LCB5LCB6KSkgPCBkaXN0YW5jZSBhbmQgdGltZXN0YXJ0IC0gd2FyZC5zcGF3blRpbWUgPCB0aW1lZGlmZiB0aGVuIHJldHVybiBuZXR3b3JrSUQgZW5kDQogIGVuZA0KDQogIHJldHVybiBuaWwNCmVuZA0KDQpmdW5jdGlvbiBHZXRMYW5kaW5nUG9zKENhc3RQb2ludCkNCglsb2NhbCB3YWxsID0gSXNXYWxsKEQzRFhWRUNUT1IzKENhc3RQb2ludC54LCBDYXN0UG9pbnQueSwgQ2FzdFBvaW50LnopKQ0KCWxvY2FsIFBvaW50ID0gVmVjdG9yKENhc3RQb2ludCkNCglsb2NhbCBTdGFydFBvaW50ID0gVmVjdG9yKFBvaW50KQ0KICAgICAgICBpZiBub3Qgd2FsbCB0aGVuIHJldHVybiBQb2ludCBlbmQNCglmb3IgaSA9IDAsIDcwMCwgMTAtLVtbRGVjcmVhc2UgZm9yIGJldHRlciBwcmVjaXNpb24sIGluY3JlYXNlIGZvciBsZXNzIGZwcyBkcm9wczpdXSBkbw0KCQlmb3IgdGhldGEgPSAwLCAyICogbWF0aC5waSArIDAuMiwgMC4yIC0tW1tTYW1lIDopXV0gZG8NCgkJCWxvY2FsIGMgPSBWZWN0b3IoU3RhcnRQb2ludC54ICsgaSAqIG1hdGguY29zKHRoZXRhKSwgU3RhcnRQb2ludC55LCBTdGFydFBvaW50LnogKyBpICogbWF0aC5zaW4odGhldGEpKQ0KCQkJaWYgbm90IElzV2FsbChEM0RYVkVDVE9SMyhjLngsIGMueSwgYy56KSkgdGhlbg0KCQkJCXJldHVybiBjDQoJCQllbmQNCgkJZW5kDQoJZW5kDQoJcmV0dXJuIFBvaW50DQplbmQNCg0KbG9jYWwgdHlwZXMgPSB7DQogIHsgZHVyYXRpb249NjAgKiAxMDAwLCBzaWdodFJhbmdlPTEzNTAsIHRyaWdnZXJSYW5nZT03MCwgY2hhck5hbWU9IlNpZ2h0V2FyZCIsIG5hbWU9IlllbGxvd1RyaW5rZXQiLCBzcGVsbE5hbWU9IlJlbGljU21hbGxMYW50ZXJuIiwgY29sb3IgPSBhcXVhQ29sb3IgfSwgLS0gMSBtaW51dGUgdHJpbmtldA0KICB7IGR1cmF0aW9uPTEyMCAqIDEwMDAsIHNpZ2h0UmFuZ2U9MTM1MCwgdHJpZ2dlclJhbmdlPTcwLCBjaGFyTmFtZT0iU2lnaHRXYXJkIiwgbmFtZT0iWWVsbG93VHJpbmtldFVwZ3JhZGUiLCBzcGVsbE5hbWU9IlJlbGljTGFudGVybiIsIGNvbG9yID0gYXF1YUNvbG9yIH0sIC0tIDIgbWludXRlIHRyaW5rZXQNCiAgeyBkdXJhdGlvbj0xODAgKiAxMDAwLCBzaWdodFJhbmdlPTEzNTAsIHRyaWdnZXJSYW5nZT03MCwgY2hhck5hbWU9IlNpZ2h0V2FyZCIsIG5hbWU9IlNpZ2h0V2FyZCIsIHNwZWxsTmFtZT0iU2lnaHRXYXJkIiwgY29sb3IgPSBncmVlbkNvbG9yIH0sIC0tIDMgbWludXRlIGdyZWVuIHdhcmQNCiAgeyBkdXJhdGlvbj0xODAgKiAxMDAwLCBzaWdodFJhbmdlPTEzNTAsIHRyaWdnZXJSYW5nZT03MCwgY2hhck5hbWU9IlNpZ2h0V2FyZCIsIG5hbWU9IlNpZ2h0V2FyZCIsIHNwZWxsTmFtZT0id3JpZ2dsZWxhbnRlcm4iLCBjb2xvciA9IGdyZWVuQ29sb3IgfSwgLS0gMyBtaW51dGUgbGFudGVybiB3YXJkDQogIHsgZHVyYXRpb249MTgwICogMTAwMCwgc2lnaHRSYW5nZT0xMzUwLCB0cmlnZ2VyUmFuZ2U9NzAsIGNoYXJOYW1lPSJWaXNpb25XYXJkIiwgbmFtZT0iU2lnaHRXYXJkIiwgc3BlbGxOYW1lPSJJdGVtR2hvc3RXYXJkIiwgY29sb3IgPSBncmVlbkNvbG9yIH0sIC0tIDMgbWludXRlIGl0ZW0gd2FyZA0KICB7IGR1cmF0aW9uPW1hdGguaHVnZSwgc2lnaHRSYW5nZT0xMzUwLCB0cmlnZ2VyUmFuZ2U9NzAsIGNoYXJOYW1lPSJWaXNpb25XYXJkIiwgbmFtZT0iVmlzaW9uV2FyZCIsIHNwZWxsTmFtZT0iVmlzaW9uV2FyZCIsIGNvbG9yID0gcHVycGxlQ29sb3IgfSwgLS0gcGluayB3YXJkDQoNCiAgeyBkdXJhdGlvbj02MDAgKiAxMDAwLCBzaWdodFJhbmdlPTQwNSwgdHJpZ2dlclJhbmdlPTExNSwgY2hhck5hbWU9Ik5veGlvdXMgVHJhcCIsIG5hbWU9IlRlZW1vTXVzaHJvb20iLCBzcGVsbE5hbWU9IkJhbnRhbVRyYXAiLCBjb2xvciA9IHdoaXRlQ29sb3IsIHRyYXAgPSB0cnVlIH0sIC0tIHRlZW1vIG11c2hyb29tDQogIHsgZHVyYXRpb249NjAgKiAxMDAwLCBzaWdodFJhbmdlPTY5MCwgdHJpZ2dlclJhbmdlPTMwMCwgY2hhck5hbWU9IkphY2sgSW4gVGhlIEJveCIsIG5hbWU9IlNoYWNvQm94Iiwgc3BlbGxOYW1lPSJKYWNrSW5UaGVCb3giLCBjb2xvciA9IHdoaXRlQ29sb3IsIHRyYXAgPSB0cnVlIH0sIC0tIHNoYWNvIHRyYXANCiAgeyBkdXJhdGlvbj0yNDAgKiAxMDAwLCBzaWdodFJhbmdlPTE1MCwgdHJpZ2dlclJhbmdlPTE1MCwgY2hhck5hbWU9IkN1cGNha2UgVHJhcCIsIG5hbWU9IkNhaXRseW5UcmFwIiwgc3BlbGxOYW1lPSJDYWl0bHluWW9yZGxlVHJhcCIsIGNvbG9yID0gd2hpdGVDb2xvciwgdHJhcCA9IHRydWUgfSwgLS0gY2FpdGx5biB0cmFwDQogIHsgZHVyYXRpb249MjQwICogMTAwMCwgc2lnaHRSYW5nZT0wLCB0cmlnZ2VyUmFuZ2U9MTUwLCBjaGFyTmFtZT0iTm94aW91cyBUcmFwIiwgbmFtZT0iTmlkYWxlZV9TcGVhciIsIHNwZWxsTmFtZT0iQnVzaHdoYWNrIiwgY29sb3IgPSB3aGl0ZUNvbG9yLCB0cmFwID0gdHJ1ZSB9IC0tIG5pZGFsZWUgdHJhcA0KfQ0KDQpmdW5jdGlvbiBPbkRlbGV0ZU9iaihvYmplY3QpDQoJaWYgb2JqZWN0IGFuZCBvYmplY3QubmFtZSBhbmQgb2JqZWN0LnZhbGlkIGFuZCBvYmplY3QudHlwZSA9PSAib2JqX0FJX01pbmlvbiIgdGhlbg0KDQogICAgZm9yIF8sdHlwZSBpbiBpcGFpcnModHlwZXMpIGRvDQoNCiAgICAgIGlmIG9iamVjdC5uYW1lID09IHR5cGUuY2hhck5hbWUgYW5kIG9iamVjdC5jaGFyTmFtZSA9PSB0eXBlLm5hbWUgdGhlbg0KDQogICAgICAgIGxvY2FsIElEID0gRmluZE9iakF0KG9iamVjdC54LCBvYmplY3QueSwgb2JqZWN0LnopIA0KDQogICAgICAgIGlmIElEIGFuZCBvYmplY3QuaGVhbHRoID09IDAgdGhlbg0KICAgICAgICAgIHBsYWNlZFdhcmRzW0lEXSA9IG5pbA0KICAgICAgICBlbmQNCiAgICAgIGVuZA0KDQogICAgZW5kDQoNCiAgZW5kDQplbmQNCg0KQ09PTERPV04gPSBHZXRHYW1lVGltZXIoKQ0KDQpmdW5jdGlvbiBQdXRXYXJkKHgsIHksIHosIHRpbWUpDQogIGlmIEdldEdhbWVUaW1lcigpIC0gQ09PTERPV04gPCAxIHRoZW4gcmV0dXJuIGVuZA0KDQogIGxvY2FsIElEID0gRmluZE9iakF0KHgsIHksIHosIDE1MCkNCg0KICBpZiBJRCA9PSBuaWwgdGhlbg0KICAgIHBsYWNlZFdhcmRzWyJ1c2VyOiIgLi4gR2V0VGlja0NvdW50KCldID0geyB4ID0geCwgeSA9IHksIHogPSB6LCB2aXNpb25SYW5nZSA9IDEzNTAsIGNvbG9yID0gZ3JheUNvbG9yLCANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYXduVGltZSA9IEdldFRpY2tDb3VudCgpLCBkdXJhdGlvbiA9IHRpbWUqMTAwMCwgY3JlYXRvciA9IG5pbCwgdGVhbSA9IG5pbCB9DQogIGVuZA0KDQogIENPT0xET1dOID0gR2V0R2FtZVRpbWVyKCkNCmVuZA0KDQpmdW5jdGlvbiBEZWxldGVXYXJkKHgsIHksIHopDQogIGlmIEdldEdhbWVUaW1lcigpIC0gQ09PTERPV04gPCAxIHRoZW4gcmV0dXJuIGVuZA0KDQogIGxvY2FsIElEID0gRmluZE9iakF0KHgsIHksIHosIDEwMCkNCg0KICBpZiBJRCB0aGVuIHBsYWNlZFdhcmRzW0lEXSA9IG5pbCBlbmQNCg0KICBDT09MRE9XTiA9IEdldEdhbWVUaW1lcigpDQplbmQNCg0KZnVuY3Rpb24gT25DcmVhdGVPYmoob2JqZWN0KQ0KDQoJaWYgb2JqZWN0IGFuZCBvYmplY3QubmFtZSBhbmQgb2JqZWN0LnZhbGlkIGFuZCBvYmplY3QudHlwZSA9PSAib2JqX0FJX01pbmlvbiIgdGhlbg0KDQogICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24ob2JqZWN0LCB0aW1lciwgZ3RpbWVyKQ0KDQogICAgICBmb3IgXyx0eXBlIGluIGlwYWlycyh0eXBlcykgZG8NCg0KICAgICAgICBpZiBvYmplY3QubmFtZSA9PSB0eXBlLmNoYXJOYW1lIGFuZCBvYmplY3QuY2hhck5hbWUgPT0gdHlwZS5uYW1lIHRoZW4NCg0KICAgICAgICAgIGxvY2FsIElEID0gRmluZE9iakF0KG9iamVjdC54LCBvYmplY3QueSwgb2JqZWN0LnosIDExMDAsIDUwMCwgdGltZXIpDQoNCiAgICAgICAgICBpZiBvYmplY3QuaGVhbHRoID4gMCB0aGVuDQogICAgICAgICAgICBpZiBJRCA9PSBuaWwgdGhlbg0KICAgICAgICAgICAgICBwbGFjZWRXYXJkc1siY3JlYXRlOiIgLi4gR2V0VGlja0NvdW50KCldID0geyB4ID0gb2JqZWN0LngsIHkgPSBvYmplY3QueSwgeiA9IG9iamVjdC56LCB2aXNpb25SYW5nZSA9IHR5cGUuc2lnaHRSYW5nZSwgY29sb3IgPSB0eXBlLmNvbG9yLCBvYmplY3QgPSBvYmplY3QsIA0KICAgICAgICAgICAgICAgIHRyaWdnZXJSYW5nZSA9IHR5cGUudHJpZ2dlclJhbmdlLCBzcGF3blRpbWUgPSB0aW1lciwgZHVyYXRpb24gPSB0eXBlLmR1cmF0aW9uLCBjcmVhdG9yID0gbmlsLCB0ZWFtID0gb2JqZWN0LnRlYW0sIHRyYXAgPSB0eXBlLnRyYXAgfQ0KICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICBwbGFjZWRXYXJkc1tJRF0ueCA9IG9iamVjdC54DQogICAgICAgICAgICAgIHBsYWNlZFdhcmRzW0lEXS55ID0gb2JqZWN0LnkNCiAgICAgICAgICAgICAgcGxhY2VkV2FyZHNbSURdLnogPSBvYmplY3Queg0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgZW5kDQoNCg0KICAgICAgICBlbmQNCg0KICAgICAgZW5kDQogICAgZW5kLCAxLCB7IG9iamVjdCwgR2V0VGlja0NvdW50KCksIEdldEdhbWVUaW1lcigpIH0gKQ0KDQogIGVuZA0KZW5kDQoJCQ0KLS1USEUgRU5E="), nil, "bt", _ENV))()
